var ve=Object.defineProperty;var se=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ce=(t,e,u)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,re=(t,e)=>{for(var u in e||(e={}))ge.call(e,u)&&ce(t,u,e[u]);if(se)for(var u of se(e))Be.call(e,u)&&ce(t,u,e[u]);return t};import{_ as x,c as he,d as P,o as c,a as g,b as y,t as v,u as A,e as S,r as q,E as K,f as L,g as W,h as T,i as M,j as H,k as Q,l as X,m as Y,n as h,w as n,p as _,q as w,F as k,s as U,v as j,x as ye,y as Ce,z,A as R,B as Z,C as J,D as Ae,G as ee,H as Fe,I as De,J as xe,K as oe,L as le,M as be,N as _e,O as Ne,P as ke,Q as $e,R as Ie,S as we,T as Se,U as Re,V as Pe,W as Ve}from"./vendor.0035a12a.js";const Me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function u(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=u(l);fetch(l.href,s)}};Me();const He={cost:10,attr:{\u59D3\u540D:"",\u79CD\u65CF:"",\u5E74\u9F84:0,\u5E78\u8FD0:10,\u529B\u91CF:10,\u654F\u6377:10,\u7CBE\u795E:10,\u9B45\u529B:10,\u667A\u529B:10,\u8D22\u5BCC:10}},Ge=[{range:[0,3],desc:"\u5F31\u4E0D\u7981\u98CE"},{range:[3,5],desc:"\u80FD\u548C\u516C\u9E21\u5927\u6218\u516B\u767E\u56DE\u5408"},{range:[5,8],desc:"\u624B\u6709\u6740\u9E21\u4E4B\u529B"},{range:[8,15],desc:"\u5288\u67F4\u6311\u6C34\u4E0D\u5728\u8BDD\u4E0B"},{range:[15,25],desc:"\u96BE\u5F97\u4E00\u89C1\u7684\u5927\u529B\u58EB"},{range:[20,45],desc:"\u8FD9\u80AF\u5B9A\u662F\u4E2A\u5927\u808C\u9738"},{range:[45,70],desc:"\u5965\u8FD0\u4F1A\u9009\u624B"},{range:[65,85],desc:"\u5DF2\u7ECF\u63A5\u8FD1\u4EBA\u7C7B\u7684\u6781\u9650\u4E86"},{range:[80,100],desc:"\u6C14\u62D4\u5C71\u516E\u529B\u76D6\u4E16"},{range:[100,999],desc:"\u771F\u7684\u8FD8\u7B97\u4EBA\u7C7B\u5417"}],Oe={\u5E74\u9F84:[{range:[0,3],desc:"\u5E7C\u513F"},{range:[3,8],desc:"\u5C11\u5E74"}],\u529B\u91CF:Ge},Te={require:!0,groupName:"\u59D3\u540D",type:"\u6587\u672C\u8F93\u5165",values:{name:"\u89D2\u8272\u59D3\u540D",info:"\u8D77\u4E2A\u540D\u5B57\u5427",attrName:"\u59D3\u540D"}},qe={require:!0,groupName:"\u79CD\u65CF",type:"\u5355\u9009\u5668",values:[{name:"\u9F99",info:"\u957F\u7FC5\u8180\u7684\u5927\u8725\u8734",cost:8,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u9F99"},attrAdd:{\u529B\u91CF:10},attrReduce:{}},{name:"\u72D7\u5934\u4EBA",info:"\u636E\u8BF4\u6709\u5DE8\u9F99\u8840\u7EDF",cost:1,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u72D7\u5934\u4EBA"},attrAdd:{\u7CBE\u795E:5},attrReduce:{\u9B45\u529B:3}},{name:"\u4EBA\u7C7B",info:"\u72E1\u8BC8\u7684\u5F02\u4E61\u4EBA",cost:1,flagAdd:[],flagDelete:[],attrSet:{\u79CD\u65CF:"\u4EBA\u7C7B"},attrAdd:{\u667A\u529B:1},attrReduce:{}}]},Le={require:!0,groupName:"\u6027\u522B",type:"\u5355\u9009\u5668",values:[{name:"\u65E0\u6027",info:"\u6CA1\u6709\u90A3\u79CD\u4E16\u4FD7\u7684\u6B32\u671B",cost:1,flagAdd:["\u65E0\u6027"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:2},attrReduce:{}},{name:"\u7537",info:"\u7537\u5B69\u5B50\u4E00\u822C\u4F1A\u5F3A\u58EE\u4E00\u70B9\u5427",cost:1,flagAdd:["\u7537"],flagDelete:[],attrSet:{},attrAdd:{\u529B\u91CF:2},attrReduce:{}},{name:"\u5973",info:"\u8F6F\u8F6F\u9999\u9999\u7684\u5973\u5B69\u5B50",cost:1,flagAdd:["\u5973"],flagDelete:[],attrSet:{},attrAdd:{\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}}]},We={},Ue={groupName:"\u5C5E\u6027\u8C03\u6574",type:"\u6570\u636E\u8C03\u6574",values:[{min:0,max:999,attrName:"\u529B\u91CF",cost:1,maxModify:5},{min:0,max:999,attrName:"\u654F\u6377",cost:1,maxModify:5},{min:0,max:999,attrName:"\u667A\u529B",cost:1,maxModify:5},{min:0,max:999,attrName:"\u8D22\u5BCC",cost:1,maxModify:5},{min:0,max:999,attrName:"\u7CBE\u795E",cost:1,maxModify:5},{min:0,max:999,attrName:"\u9B45\u529B",cost:1,maxModify:5}]},je={require:!1,groupName:"\u7279\u6027",type:"\u591A\u9009\u5668",values:[{name:"\u51FA\u8EAB\u8D35\u65CF",info:"\u81F3\u5C11\u4E0D\u662F\u8DEA\u65CF",cost:4,flagAdd:["\u8D35\u65CF"],flagDelete:[],attrSet:{},attrAdd:{\u8D22\u5BCC:5,\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}},{name:"\u6276\u5979",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u6276\u5979"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}},{name:"\u7537\u540C",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u7537\u540C"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}}]},ze=[Te,qe,Le,We,je,Ue],Je={eventPackName:"\u4EBA\u751F",events:[{name:"\u5E73\u5E73\u65E0\u5947\u7684\u751F\u6D3B",text:"\u5E73\u5B89\u65E0\u4E8B\u7684\u5EA6\u8FC7\u4E86\u4E00\u5E74",options:[{label:"\u65B0\u5E74\u5FEB\u4E50",goto:[]}]}]},Ke=[{name:"default",text:"\u51C6\u5907\u597D\u51FA\u751F\u4E86\u4E48",options:[{label:"\u51FA\u751F",choosenText:"\u4F60\u51FA\u751F\u4E86",goto:["\u96BE\u4EA7"]},{label:"\u80CE\u6B7B\u8179\u4E2D",choosenText:"\u80CE\u6B7B\u8179\u4E2D",goto:["\u80CE\u6B7B\u8179\u4E2D"]}]},Je],Qe=[{name:"default",title:"\u5C31\u505A\u4E86\u8FD9\u4E48\u70B9\u513F",text:"\u6CA1\u4E86,\u4F5C\u8005\u592A\u61D2\u4E86,\u6CA1\u66F4\u65B0"},{name:"\u80CE\u6B7B\u8179\u4E2D",title:"\u80CE\u6B7B\u8179\u4E2D",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0}}\u9884\u89C1\u5230\u4E86\u4ED6\u60B2\u60E8\u7684\u4E00\u751F,\u751A\u81F3\u4E0D\u613F\u610F\u964D\u4E34\u5230\u8FD9\u4E16\u4E0A"},{name:"\u96BE\u4EA7",title:"\u96BE\u4EA7\u800C\u6B7B",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0}},\u4ED6\u7684\u6BCD\u4EB2\u96BE\u4EA7\u4E86,\u63D0\u524D\u7ED3\u675F\u4E86\u4E00\u751F,\u987A\u4FBF\u5BB3\u6B7B\u4E86\u4ED6\u7684\u6BCD\u4EB2"}],Xe={name:"\u5F02\u754C\u8F6C\u751F",info:"\u611F\u89C9\u4E5F\u6CA1\u4EC0\u4E48\u597D\u8BB2\u7684\uFF0C\u770B\u6807\u9898\u5C31\u884C\u4E86",baseAttr:He,creater:ze,properties:Oe,events:Ke,ends:Qe};var O={reincarnation:Xe};const Ye={state:()=>({scenarioName:""}),mutations:{changeScenario(t,e){t.scenarioName=e}},actions:{changeScenario({commit:t,dispatch:e},u){if(!u)return;t("changeScenario",u);const r=O[u];e("setPlayerData",r.baseAttr)}}},Ze={state:()=>({flags:[],attr:{}}),mutations:{setPlayerData(t,e){x.assign(t,e)}},actions:{setPlayerData({commit:t,dispatch:e},u){t("setPlayerData",u)}},modules:{}};function et(t,e){const u=tt(t);if(e.length===0){const r=u.find(l=>l.name==="default");if(r)return r}return[]}function tt(t){const e=[];return t.forEach(u=>{u.name&&e.push(u),u.eventPackName&&u.event&&e.push(...u.event)}),e}function ut(t,e){const u=[];if(e){const r=t.find(l=>l.name===e);if(r)return[r]}if(u.length===0&&!e){const r=u.find(l=>l.name==="default");if(r)return r}return[]}const at={state:()=>({end:{},historyActions:[]}),mutations:{newActionHistory(t,e){t.historyActions.push(e)},startGame(t){t.end={},t.historyActions=[]},endGame(t,e){t.end=e}},actions:{newActionHistory({commit:t,dispatch:e},u){t("newActionHistory",u)},startGame({commit:t}){t("startGame")},endGame({commit:t,dispatch:e,rootState:u},r){t("endGame",r)},eventChain({commit:t,dispatch:e,rootState:u}){return new Promise(async(r,l)=>{var i;let s;const o=x.last(u.game.historyActions);if(o){const{choosen:m,options:E}=o,a=E.find(f=>f.label===m);if(((i=a==null?void 0:a.goto)==null?void 0:i.length)>0){const f=x.random(0,a.goto.length-1);s=a.goto[f]}}if(s){const m=u.scenario.scenarioName||"reincarnation",E=O[m],a=ut(E.ends,s);if((a==null?void 0:a.length)>0){const f=x.random(0,a.length-1),p=a[f];e("endGame",p),r(p)}else r()}else r()})},getNewEvent({commit:t,dispatch:e,rootState:u}){return new Promise(async(r,l)=>{const s=u.scenario.scenarioName||"reincarnation",o=u.game.historyActions||"reincarnation";s||l("no scenario");const i=O[s],m=await e("eventChain");if(m)r(m);else{const E=et(i.events,o);r(E)}})}},modules:{}},nt="text-gamer",st="0.0.4",ct={dev:"vite",build:"vue-tsc --noEmit && vite build",serve:"vite preview"},rt={"element-plus":"^1.2.0-beta.5",less:"^4.1.2",loadsh:"^0.0.4",sass:"^1.44.0",vue:"^3.2.23","vue-router":"4",vuex:"^4.0.2"},ot={"@vitejs/plugin-vue":"^1.9.3",typescript:"^4.4.3","unplugin-auto-import":"^0.5.1","unplugin-vue-components":"^0.17.2",vite:"^2.6.4","vue-tsc":"^0.3.0"};var lt={name:nt,version:st,scripts:ct,dependencies:rt,devDependencies:ot};const F=he({state:{version:lt.version},mutations:{setSelectAddress(t,e){t.selectAddress=e}},actions:{},modules:{scenario:Ye,player:Ze,game:at}});var V=(t,e)=>{const u=t.__vccOpts||t;for(const[r,l]of e)u[r]=l;return u};const _t={class:"header"},dt=S(" \u597D\u65E5\u5B50\u90FD\u5728\u4E0B\u8F88\u5B50 "),it={class:"version"},mt=P({setup(t){return(e,u)=>(c(),g("div",_t,[dt,y("span",it,"v"+v(A(F).state.version),1)]))}});var te=V(mt,[["__scopeId","data-v-57a8e47e"]]);const ue=P({setup(t){return(e,u)=>(c(),g("div",null,"github,qqGourp,andsoon"))}});const pt=t=>(U("data-v-6bf49a2c"),t=t(),j(),t),ft=pt(()=>y("h1",null,"\u9009\u62E9\u4F60\u8981\u6E38\u73A9\u7684\u5267\u672C:",-1)),Et=P({setup(t){const e=q(O),u=r=>{F.dispatch("changeScenario",r),I.push({name:"create",params:{scenarioName:r}})};return(r,l)=>{const s=K,o=L,i=W,m=T,E=M,a=H,f=Q,p=X,D=Y;return c(),h(D,{class:"page"},{default:n(()=>[_(s,null,{default:n(()=>[_(te)]),_:1}),_(f,null,{default:n(()=>[ft,_(a,{gutter:20},{default:n(()=>[_(E,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[(c(!0),g(k,null,w(A(e),(b,d)=>(c(),h(m,{class:"scenarioItem",onClick:N=>u(d)},{default:n(()=>[_(i,{title:b.name},{default:n(()=>[_(o,{label:"\u63CF\u8FF0\uFF1A"},{default:n(()=>[S(v(b.info),1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})]),_:1}),_(p,null,{default:n(()=>[_(ue)]),_:1})]),_:1})}}});var vt=V(Et,[["__scopeId","data-v-6bf49a2c"]]);const gt=P({props:{createrItem:null},setup(t){const e=t,u=J(),r=o=>{const i=e.createrItem.values.find(m=>m.name===o);u.emit("change",i),u.emit("changeData",i)},l=q(),s=o=>x.isEmpty(o.attrSet)&&x.isEmpty(o.attrAdd)&&x.isEmpty(o.attrReduce);return(o,i)=>{const m=M,E=H,a=L,f=Z,p=W,D=ye,b=Ce;return c(),g("div",null,[_(E,null,{default:n(()=>[_(m,{span:24},{default:n(()=>[S(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),_(E,{class:"container"},{default:n(()=>[_(b,{class:"content",border:"",onChange:r,modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=d=>l.value=d)},{default:n(()=>[(c(!0),g(k,null,w(e.createrItem.values,d=>(c(),h(D,{class:"item",label:d.name},{default:n(()=>[_(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(c(),h(a,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[y("span",{class:z(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(c(),h(a,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[S(v(d.info),1)]),_:2},1024)):R("",!0),s(d)?R("",!0):(c(),h(a,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(c(!0),g(k,null,w(d.attrSet,(C,B)=>(c(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(C),1))),128)),(c(!0),g(k,null,w(d.attrAdd,(C,B)=>(c(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(C),1))),128)),(c(!0),g(k,null,w(d.attrReduce,(C,B)=>(c(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(C),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(c(),h(a,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(c(!0),g(k,null,w(d.flagAdd,C=>(c(),h(f,{type:"info"},{default:n(()=>[S(v(C),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var Bt=V(gt,[["__scopeId","data-v-3a01fed0"]]);const ht={class:"container"},yt=P({props:{createrItem:null},setup(t){const e=t,u=J(),r=s=>{if(!s)return;const o={attrSet:{[e.createrItem.values.attrName]:s}};u.emit("changeData",o)},l=q();return(s,o)=>{const i=M,m=H,E=Ae;return c(),g("div",ht,[_(m,null,{default:n(()=>[_(i,{span:24},{default:n(()=>[S(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),_(m,{class:"container"},{default:n(()=>[_(E,{class:"content",onInput:r,modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),placeholder:e.createrItem.values.info},null,8,["modelValue","placeholder"])]),_:1})])}}});var Ct=V(yt,[["__scopeId","data-v-dcda753e"]]);const de=t=>(U("data-v-86fe8a28"),t=t(),j(),t),At={class:"container"},Ft={class:"info"},Dt={class:"decs"},xt={class:"res"},bt=de(()=>y("span",null," -> ",-1)),Nt=de(()=>y("span",null,"\u70B9\u6570:",-1)),kt=P({props:{createrItem:null},setup(t){const e=t,u=J(),r=o=>{const i={attrAdd:{},attrReduce:{},cost:0};for(const m in s)if(Object.prototype.hasOwnProperty.call(s,m)){const E=s[m];if(E>0){i.attrAdd[m]=Math.abs(E);const a=e.createrItem.values.find(f=>f.attrName===m);i.cost+=E*a.cost}if(E<0){i.attrReduce[m]=Math.abs(E);const a=e.createrItem.values.find(f=>f.attrName===m);i.cost+=E*a.cost}}u.emit("changeData",i)},l=x.cloneDeep(F.state.player.attr),s=ee(x.mapValues(l,()=>0));return(o,i)=>{const m=M,E=H,a=Fe,f=T;return c(),g("div",At,[_(E,null,{default:n(()=>[_(m,{span:24},{default:n(()=>[S(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),_(E,{class:"content"},{default:n(()=>[(c(!0),g(k,null,w(e.createrItem.values,p=>(c(),h(f,{class:"content-card"},{default:n(()=>[y("div",Ft,[S(v(p.attrName)+": ",1),y("span",Dt,"\u6BCF\u70B9\u8C03\u6574\u6D88\u8017/\u589E\u52A0 "+v(p.cost)+"\u70B9 \u70B9\u6570:",1)]),_(a,{modelValue:A(s)[p.attrName],"onUpdate:modelValue":D=>A(s)[p.attrName]=D,min:-p.maxModify,max:p.maxModify,onChange:r},null,8,["modelValue","onUpdate:modelValue","min","max"]),y("div",xt,[y("span",null,[y("span",null,v(A(F).state.player.attr[p.attrName]-A(s)[p.attrName]),1),bt,y("span",null,v(A(F).state.player.attr[p.attrName]),1)]),y("span",null,[Nt,y("span",{class:z(A(s)[p.attrName]*p.cost>=0?"reduce":"add")},v(A(s)[p.attrName]*p.cost>=0?"":"+"),3),y("span",{class:z(A(s)[p.attrName]*p.cost>=0?"reduce":"add")},v(-A(s)[p.attrName]*p.cost),3)])])]),_:2},1024))),256))]),_:1})])}}});var $t=V(kt,[["__scopeId","data-v-86fe8a28"]]);const It=P({props:{createrItem:null},setup(t){const e=t,u=J(),r=o=>{const i=e.createrItem.values.filter(m=>o.includes(m.name));u.emit("change",i),u.emit("changeData",i)},l=q([]),s=o=>x.isEmpty(o.attrSet)&&x.isEmpty(o.attrAdd)&&x.isEmpty(o.attrReduce);return(o,i)=>{const m=M,E=H,a=L,f=Z,p=W,D=De,b=xe;return c(),g("div",null,[_(E,null,{default:n(()=>[_(m,{span:24},{default:n(()=>[S(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),_(E,{class:"container"},{default:n(()=>[_(b,{class:"content",onChange:r,modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=d=>l.value=d)},{default:n(()=>[(c(!0),g(k,null,w(e.createrItem.values,d=>(c(),h(D,{class:"item",label:d.name},{default:n(()=>[_(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(c(),h(a,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[y("span",{class:z(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(c(),h(a,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[S(v(d.info),1)]),_:2},1024)):R("",!0),s(d)?R("",!0):(c(),h(a,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(c(!0),g(k,null,w(d.attrSet,(C,B)=>(c(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(C),1))),128)),(c(!0),g(k,null,w(d.attrAdd,(C,B)=>(c(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(C),1))),128)),(c(!0),g(k,null,w(d.attrReduce,(C,B)=>(c(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(C),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(c(),h(a,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(c(!0),g(k,null,w(d.flagAdd,C=>(c(),h(f,{type:"info"},{default:n(()=>[S(v(C),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var wt=V(It,[["__scopeId","data-v-00462d1d"]]);const St={class:"sticky"},Rt=S("\u770B\u770B\u8FD9\u8F88\u5B50\u8FC7\u7684\u600E\u4E48\u6837"),Pt=P({props:{creater:null,baseAttr:null},setup(t){const e=t,u=ee([]),r=q(e.baseAttr.cost),l=function(){let a=x.cloneDeep(e.baseAttr),f=x.assign({flags:[],attr:{}},a),p=a.cost;u.forEach(D=>{x.isArray(D)&&D.forEach(b=>{[f,p]=s(f,b,p)}),[f,p]=s(f,D,p)}),r.value=p,F.dispatch("setPlayerData",re({},f))},s=function(a,f,p){const{flagAdd:D,flagDelete:b,attrSet:d,attrAdd:N,attrReduce:C,cost:B}=f;x.isEmpty(b)||x.pull(a.flags,...b),x.isEmpty(D)||a.flags.push(...D);for(const $ in d)if(Object.prototype.hasOwnProperty.call(d,$)){const G=d[$];a.attr[$]=G}for(const $ in N)if(Object.prototype.hasOwnProperty.call(N,$)){const G=N[$];a.attr[$]=x.defaultTo(a.attr[$],0),a.attr[$]+=G}for(const $ in C)if(Object.prototype.hasOwnProperty.call(C,$)){const G=C[$];a.attr[$]=x.defaultTo(a.attr[$],0),a.attr[$]-=G}return B&&(p-=B),[a,p]},o=(a,f)=>{u[a]=f,l()},i=()=>e.creater.every((a,f)=>{if(a.require){const p=u[f],D=!x.isEmpty(p);if(!D)throw a.groupName;return D}else return!0}),m=()=>{try{const a=i();r.value<0?le({title:"\u70B9\u6570\u4E0D\u591F\u7528\u554A",message:"\u5269\u4F59\u70B9\u6570\u4E0D\u591F\u7528\u554A",type:"error"}):r.value>0?be.confirm("\u4F60\u70B9\u6570\u8FD8\u6709\u5269\u7684\u54E6,\u771F\u7684\u5C31\u8FD9\u6837\u4E48??","Warning",{confirmButtonText:"\u8001\u5B50\u4E50\u610F",cancelButtonText:"\u7B49\u6211\u82B1\u5149",type:"warning"}).then(()=>{_e({type:"success",message:"\u5927\u5144\u5F1F\u725B\u903C\u554A"}),E()}).catch(()=>{_e({type:"info",message:"\u597D\u561E,\u7B49\u4F60"})}):E()}catch(a){le({title:"\u5C11\u9009\u4E86\u4E1C\u897F\u554A",message:`${a},\u662F\u5FC5\u586B/\u5FC5\u9009\u9879`,type:"error"})}},E=()=>{F.dispatch("startGame"),I.push({name:"play"})};return(a,f)=>{const p=T,D=oe,b=M,d=H;return c(),g(k,null,[y("div",St,[_(p,{type:"primary"},{default:n(()=>[S("\u5269\u4F59\u70B9\u6570:"+v(r.value),1)]),_:1})]),(c(!0),g(k,null,w(e.creater,(N,C)=>(c(),g("div",null,[N.type==="\u5355\u9009\u5668"?(c(),h(Bt,{key:0,createrItem:N,onChangeData:B=>{o(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u591A\u9009\u5668"?(c(),h(wt,{key:1,createrItem:N,onChangeData:B=>{o(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6587\u672C\u8F93\u5165"?(c(),h(Ct,{key:2,createrItem:N,onChangeData:B=>{o(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6570\u636E\u8C03\u6574"?(c(),h($t,{key:3,createrItem:N,onChangeData:B=>{o(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0)]))),256)),y("div",null,[_(d,null,{default:n(()=>[_(b,{span:24,class:"btn"},{default:n(()=>[_(D,{class:"big",type:"primary",onClick:m},{default:n(()=>[Rt]),_:1})]),_:1})]),_:1})])],64)}}});var Vt=V(Pt,[["__scopeId","data-v-e4e6d4b2"]]);const Mt={class:"content"},Ht={class:"propertie"},Gt=P({setup(t){const e=O[F.state.scenario.scenarioName],u=(r,l)=>{var o,i;const s=(o=e==null?void 0:e.properties)==null?void 0:o[r];if(s){const m=s.filter(a=>x.inRange(l,...a.range)),E=x.random(0,m.length-1);return(i=m==null?void 0:m[E])==null?void 0:i.desc}};return(r,l)=>{const s=L,o=W,i=Z,m=Ne,E=T;return c(),h(E,{class:"box-card"},{default:n(()=>[_(m,null,{default:n(()=>[y("div",Mt,[_(o,{title:"\u89D2\u8272\u5C5E\u6027",column:1},{default:n(()=>[(c(!0),g(k,null,w(A(F).state.player.attr,(a,f)=>(c(),h(s,{key:f+a,label:f},{default:n(()=>[S(v(a),1),y("span",Ht,v(u(f,a)),1)]),_:2},1032,["label"]))),128))]),_:1}),(c(!0),g(k,null,w(A(F).state.player.flags,(a,f)=>(c(),h(i,{key:f,class:"flags"},{default:n(()=>[S(v(a),1)]),_:2},1024))),128))])]),_:1})]),_:1})}}});var ie=V(Gt,[["__scopeId","data-v-064ee701"]]);const Ot=t=>(U("data-v-03b1dc2c"),t=t(),j(),t),Tt=Ot(()=>y("h2",null,"\u521B\u5EFA\u89D2\u8272",-1)),qt=P({setup(t){var l,s,o,i,m,E,a,f,p,D,b,d,N,C,B,$,G,ne;((o=(s=(l=I==null?void 0:I.currentRoute)==null?void 0:l.value)==null?void 0:s.params)==null?void 0:o.scenarioName)!==((m=(i=F==null?void 0:F.state)==null?void 0:i.scenario)==null?void 0:m.scenarioName)&&((f=(a=(E=I==null?void 0:I.currentRoute)==null?void 0:E.value)==null?void 0:a.params)==null?void 0:f.scenarioName)&&F.dispatch("changeScenario",(b=(D=(p=I==null?void 0:I.currentRoute)==null?void 0:p.value)==null?void 0:D.params)==null?void 0:b.scenarioName),!((C=(N=(d=I==null?void 0:I.currentRoute)==null?void 0:d.value)==null?void 0:N.params)==null?void 0:C.scenarioName)&&!(($=(B=F==null?void 0:F.state)==null?void 0:B.scenario)==null?void 0:$.scenarioName)&&I.push({name:"HelloWorld"});const e=O[(ne=(G=F.state)==null?void 0:G.scenario)==null?void 0:ne.scenarioName];e||I.push({name:"HelloWorld"});const{creater:u,baseAttr:r}=e;return(ru,ou)=>{const me=K,pe=Q,fe=X,Ee=Y;return c(),h(Ee,{class:"page"},{default:n(()=>[_(me,null,{default:n(()=>[_(te)]),_:1}),_(pe,null,{default:n(()=>[y("h1",null,v(A(O).name),1),Tt,_(Vt,{creater:A(u),baseAttr:A(r)},null,8,["creater","baseAttr"]),_(ie)]),_:1}),_(fe,null,{default:n(()=>[_(ue)]),_:1})]),_:1})}}});var Lt=V(qt,[["__scopeId","data-v-03b1dc2c"]]);const Wt={class:"event"},Ut={key:0,class:"eventRes"},jt=P({setup(t){const e=u=>{const{choosen:r,options:l}=u,s=l.find(i=>i.label===r);return s==null?void 0:s.choosenText};return(u,r)=>{var i,m,E;const l=T,s=M,o=H;return c(!0),g(k,null,w((E=(m=(i=A(F))==null?void 0:i.state)==null?void 0:m.game)==null?void 0:E.historyActions,(a,f)=>(c(),h(o,{gutter:20},{default:n(()=>[_(s,{span:24},{default:n(()=>[_(l,{class:"box-card"},{default:n(()=>[y("div",Wt,v(a.text),1),e(a)?(c(),g("div",Ut,v(e(a)),1)):R("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)}}});var zt=V(jt,[["__scopeId","data-v-19e6628f"]]);const Jt=P({async setup(t){let e,u,r=ee({});const l=(o,i)=>{const m=x.cloneDeep(o);m.choosen=i,F.dispatch("newActionHistory",m),s()},s=async()=>{const o=await F.dispatch("getNewEvent");return r=o,o};return[e,u]=ke(()=>s()),await e,u(),(o,i)=>{const m=M,E=H,a=oe,f=T;return c(),h(f,{class:"currentEvent"},{default:n(()=>{var p,D;return[_(E,{gutter:20},{default:n(()=>[_(m,{span:24},{default:n(()=>{var b;return[y("div",null,v((b=A(r))==null?void 0:b.text),1)]}),_:1})]),_:1}),((D=(p=A(r))==null?void 0:p.options)==null?void 0:D.length)?(c(),h(E,{key:0,gutter:20},{default:n(()=>[_(m,{span:24,class:"operation"},{default:n(()=>[(c(!0),g(k,null,w(A(r).options,b=>(c(),h(a,{onClick:d=>l(A(r),b.label),type:"primary"},{default:n(()=>[S(v(b.label),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})):R("",!0)]}),_:1})}}});var Kt=V(Jt,[["__scopeId","data-v-754fc3b9"]]);const Qt=t=>(U("data-v-51983e99"),t=t(),j(),t),Xt=Qt(()=>y("h1",{class:"gameEnd"},"\u6E38\u620F\u7ED3\u675F",-1)),Yt={class:"title"},Zt={class:"text"},eu=P({setup(t){const e=F.state.game.end;return(u,r)=>{const l=M,s=H,o=T;return c(),g(k,null,[Xt,_(o,{class:"currentEvent"},{default:n(()=>[_(s,{gutter:20},{default:n(()=>[_(l,{span:24},{default:n(()=>{var i;return[y("div",Yt,v((i=A(e))==null?void 0:i.title),1)]}),_:1}),_(l,{span:24},{default:n(()=>{var i;return[y("div",Zt,v((i=A(e))==null?void 0:i.text),1)]}),_:1})]),_:1})]),_:1})],64)}}});var tu=V(eu,[["__scopeId","data-v-51983e99"]]);const uu={class:"content"},au=P({setup(t){var r,l;window.scrollTo(0,0);const e=O[(l=(r=F.state)==null?void 0:r.scenario)==null?void 0:l.scenarioName],u=$e(()=>{var s,o,i,m;return console.log((o=(s=F.state)==null?void 0:s.game)==null?void 0:o.end),!x.isEmpty((m=(i=F.state)==null?void 0:i.game)==null?void 0:m.end)});return(s,o)=>{const i=K,m=Ie,E=Q,a=X,f=Y;return c(),h(f,{class:"page"},{default:n(()=>[_(i,null,{default:n(()=>[_(te)]),_:1}),_(E,null,{default:n(()=>{var p;return[y("div",uu,[y("h1",null,"\u5267\u672C:"+v((p=A(e))==null?void 0:p.name),1),_(m,{target:".content"},{default:n(()=>[_(ie)]),_:1}),_(zt),A(u)?R("",!0):(c(),h(Kt,{key:0})),A(u)?(c(),h(tu,{key:1})):R("",!0)])]}),_:1}),_(a,null,{default:n(()=>[_(ue)]),_:1})]),_:1})}}});var nu=V(au,[["__scopeId","data-v-58e20ff3"]]);const su=[{path:"/create/:scenarioName",component:Lt,name:"create",props:!0},{path:"/play",component:nu,name:"play"},{path:"/",component:vt,name:"HelloWorld"}],I=we({history:Se(),routes:su});const cu=P({setup(t){return(e,u)=>{const r=Re("router-view");return c(),h(Pe,null,{default:n(()=>[_(r)]),_:1})}}}),ae=Ve(cu);ae.use(F);ae.use(I);I.isReady().then(()=>ae.mount("#app"));
