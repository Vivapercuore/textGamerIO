var ve=Object.defineProperty;var ce=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var oe=(u,e,a)=>e in u?ve(u,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[e]=a,re=(u,e)=>{for(var a in e||(e={}))ge.call(e,a)&&oe(u,a,e[a]);if(ce)for(var a of ce(e))Be.call(e,a)&&oe(u,a,e[a]);return u};import{_ as x,c as he,d as P,o as c,a as g,b as y,t as v,u as A,e as w,r as q,E as K,f as L,g as W,h as T,i as H,j as M,k as Q,l as X,m as Y,n as h,w as n,p as r,q as S,F as $,s as U,v as j,x as ye,y as Ce,z,A as R,B as Z,C as J,D as Ae,G as ee,H as Fe,I as De,J as xe,K as te,L as le,M as be,N as _e,O as Ne,P as ke,Q as $e,R as Ie,S as we,T as Se,U as Re,V as Pe,W as Ve}from"./vendor.2d5e6834.js";const He=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))o(_);new MutationObserver(_=>{for(const s of _)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(_){const s={};return _.integrity&&(s.integrity=_.integrity),_.referrerpolicy&&(s.referrerPolicy=_.referrerpolicy),_.crossorigin==="use-credentials"?s.credentials="include":_.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(_){if(_.ep)return;_.ep=!0;const s=a(_);fetch(_.href,s)}};He();const Me={cost:10,attr:{\u59D3\u540D:"",\u79CD\u65CF:"",\u5E74\u9F84:0,\u5E78\u8FD0:10,\u529B\u91CF:10,\u654F\u6377:10,\u7CBE\u795E:10,\u9B45\u529B:10,\u667A\u529B:10,\u8D22\u5BCC:10}},Ge=[{range:[0,3],desc:"\u5F31\u4E0D\u7981\u98CE"},{range:[3,5],desc:"\u80FD\u548C\u516C\u9E21\u5927\u6218\u516B\u767E\u56DE\u5408"},{range:[5,8],desc:"\u624B\u6709\u6740\u9E21\u4E4B\u529B"},{range:[8,15],desc:"\u5288\u67F4\u6311\u6C34\u4E0D\u5728\u8BDD\u4E0B"},{range:[15,25],desc:"\u96BE\u5F97\u4E00\u89C1\u7684\u5927\u529B\u58EB"},{range:[20,45],desc:"\u8FD9\u80AF\u5B9A\u662F\u4E2A\u5927\u808C\u9738"},{range:[45,70],desc:"\u5965\u8FD0\u4F1A\u9009\u624B"},{range:[65,85],desc:"\u5DF2\u7ECF\u63A5\u8FD1\u4EBA\u7C7B\u7684\u6781\u9650\u4E86"},{range:[80,100],desc:"\u6C14\u62D4\u5C71\u516E\u529B\u76D6\u4E16"},{range:[100,999],desc:"\u771F\u7684\u8FD8\u7B97\u4EBA\u7C7B\u5417"}],Oe={\u5E74\u9F84:[{range:[0,3],desc:"\u5E7C\u513F"},{range:[3,8],desc:"\u5C11\u5E74"}],\u529B\u91CF:Ge},Te={require:!0,groupName:"\u59D3\u540D",type:"\u6587\u672C\u8F93\u5165",values:{name:"\u89D2\u8272\u59D3\u540D",info:"\u8D77\u4E2A\u540D\u5B57\u5427",attrName:"\u59D3\u540D"}},qe={require:!0,groupName:"\u79CD\u65CF",type:"\u5355\u9009\u5668",values:[{name:"\u9F99",info:"\u957F\u7FC5\u8180\u7684\u5927\u8725\u8734",cost:8,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u9F99"},attrAdd:{\u529B\u91CF:10},attrReduce:{}},{name:"\u72D7\u5934\u4EBA",info:"\u636E\u8BF4\u6709\u5DE8\u9F99\u8840\u7EDF",cost:1,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u72D7\u5934\u4EBA"},attrAdd:{\u7CBE\u795E:5},attrReduce:{\u9B45\u529B:3}},{name:"\u4EBA\u7C7B",info:"\u72E1\u8BC8\u7684\u5F02\u4E61\u4EBA",cost:1,flagAdd:[],flagDelete:[],attrSet:{\u79CD\u65CF:"\u4EBA\u7C7B"},attrAdd:{\u667A\u529B:1},attrReduce:{}}]},Le={require:!0,groupName:"\u6027\u522B",type:"\u5355\u9009\u5668",values:[{name:"\u65E0\u6027",info:"\u6CA1\u6709\u90A3\u79CD\u4E16\u4FD7\u7684\u6B32\u671B",cost:1,flagAdd:["\u65E0\u6027"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:2},attrReduce:{}},{name:"\u7537",info:"\u7537\u5B69\u5B50\u4E00\u822C\u4F1A\u5F3A\u58EE\u4E00\u70B9\u5427",cost:1,flagAdd:["\u7537"],flagDelete:[],attrSet:{},attrAdd:{\u529B\u91CF:2},attrReduce:{}},{name:"\u5973",info:"\u8F6F\u8F6F\u9999\u9999\u7684\u5973\u5B69\u5B50",cost:1,flagAdd:["\u5973"],flagDelete:[],attrSet:{},attrAdd:{\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}}]},We={},Ue={groupName:"\u5C5E\u6027\u8C03\u6574",type:"\u6570\u636E\u8C03\u6574",values:[{min:0,max:999,attrName:"\u529B\u91CF",cost:1,maxModify:5},{min:0,max:999,attrName:"\u654F\u6377",cost:1,maxModify:5},{min:0,max:999,attrName:"\u667A\u529B",cost:1,maxModify:5},{min:0,max:999,attrName:"\u8D22\u5BCC",cost:1,maxModify:5},{min:0,max:999,attrName:"\u7CBE\u795E",cost:1,maxModify:5},{min:0,max:999,attrName:"\u9B45\u529B",cost:1,maxModify:5}]},je={require:!1,groupName:"\u7279\u6027",type:"\u591A\u9009\u5668",values:[{name:"\u51FA\u8EAB\u8D35\u65CF",info:"\u81F3\u5C11\u4E0D\u662F\u8DEA\u65CF",cost:4,flagAdd:["\u8D35\u65CF"],flagDelete:[],attrSet:{},attrAdd:{\u8D22\u5BCC:5,\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}},{name:"\u6276\u5979",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u6276\u5979"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}},{name:"\u7537\u540C",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u7537\u540C"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}}]},ze=[Te,qe,Le,We,je,Ue],Je={eventPackName:"\u4EBA\u751F",events:[{name:"\u5E73\u5E73\u65E0\u5947\u7684\u751F\u6D3B",text:"\u5E73\u5B89\u65E0\u4E8B\u7684\u5EA6\u8FC7\u4E86\u4E00\u5E74",options:[{label:"\u65B0\u5E74\u5FEB\u4E50",goto:[]}]}]},Ke=[{name:"default",text:"\u51C6\u5907\u597D\u51FA\u751F\u4E86\u4E48",options:[{label:"\u51FA\u751F",choosenText:"\u4F60\u51FA\u751F\u4E86",goto:["\u96BE\u4EA7"]},{label:"\u80CE\u6B7B\u8179\u4E2D",choosenText:"\u80CE\u6B7B\u8179\u4E2D",goto:["\u80CE\u6B7B\u8179\u4E2D"]}]},Je],Qe=[{name:"default",title:"\u5C31\u505A\u4E86\u8FD9\u4E48\u70B9\u513F",text:"\u6CA1\u4E86,\u4F5C\u8005\u592A\u61D2\u4E86,\u6CA1\u66F4\u65B0"},{name:"\u80CE\u6B7B\u8179\u4E2D",title:"\u80CE\u6B7B\u8179\u4E2D",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0}}\u9884\u89C1\u5230\u4E86\u4ED6\u60B2\u60E8\u7684\u4E00\u751F,\u751A\u81F3\u4E0D\u613F\u610F\u964D\u4E34\u5230\u8FD9\u4E16\u4E0A"},{name:"\u96BE\u4EA7",title:"\u96BE\u4EA7\u800C\u6B7B",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0}},\u4ED6\u7684\u6BCD\u4EB2\u96BE\u4EA7\u4E86,\u63D0\u524D\u7ED3\u675F\u4E86\u4E00\u751F,\u987A\u4FBF\u5BB3\u6B7B\u4E86\u4ED6\u7684\u6BCD\u4EB2"}],Xe={name:"\u5F02\u754C\u8F6C\u751F",info:"\u611F\u89C9\u4E5F\u6CA1\u4EC0\u4E48\u597D\u8BB2\u7684\uFF0C\u770B\u6807\u9898\u5C31\u884C\u4E86",baseAttr:Me,creater:ze,properties:Oe,events:Ke,ends:Qe};var O={reincarnation:Xe};const Ye={state:()=>({scenarioName:""}),mutations:{changeScenario(u,e){u.scenarioName=e}},actions:{changeScenario({commit:u,dispatch:e},a){if(!a)return;u("changeScenario",a);const o=O[a];e("setPlayerData",o.baseAttr)}}},Ze={state:()=>({flags:[],attr:{}}),mutations:{setPlayerData(u,e){x.assign(u,e)}},actions:{setPlayerData({commit:u,dispatch:e},a){u("setPlayerData",a)}},modules:{}};function et(u,e){const a=tt(u);if(e.length===0){const o=a.find(_=>_.name==="default");if(o)return o}return[]}function tt(u){const e=[];return u.forEach(a=>{a.name&&e.push(a),a.eventPackName&&a.event&&e.push(...a.event)}),e}function ut(u,e){const a=[];if(e){const o=u.find(_=>_.name===e);if(o)return[o]}if(a.length===0&&!e){const o=a.find(_=>_.name==="default");if(o)return o}return[]}const at={state:()=>({end:{},historyActions:[]}),mutations:{newActionHistory(u,e){u.historyActions.push(e)},startGame(u){u.end={},u.historyActions=[]},endGame(u,e){u.end=e}},actions:{newActionHistory({commit:u,dispatch:e},a){u("newActionHistory",a)},startGame({commit:u}){u("startGame")},endGame({commit:u,dispatch:e,rootState:a},o){u("endGame",o)},eventChain({commit:u,dispatch:e,rootState:a}){return new Promise(async(o,_)=>{var m;let s;const l=x.last(a.game.historyActions);if(l){const{choosen:i,options:f}=l,t=f.find(E=>E.label===i);if(((m=t==null?void 0:t.goto)==null?void 0:m.length)>0){const E=x.random(0,t.goto.length-1);s=t.goto[E]}}if(s){const i=a.scenario.scenarioName||"reincarnation",f=O[i],t=ut(f.ends,s);if((t==null?void 0:t.length)>0){const E=x.random(0,t.length-1),p=t[E];e("endGame",p),o(p)}else o()}else o()})},getNewEvent({commit:u,dispatch:e,rootState:a}){return new Promise(async(o,_)=>{const s=a.scenario.scenarioName||"reincarnation",l=a.game.historyActions||"reincarnation";s||_("no scenario");const m=O[s],i=await e("eventChain");if(i)o(i);else{const f=et(m.events,l);o(f)}})}},modules:{}},nt="text-gamer",st="0.1.0",ct={dev:"vite",build:"vue-tsc --noEmit && vite build",serve:"vite preview"},ot={"element-plus":"^1.2.0-beta.5",less:"^4.1.2",loadsh:"^0.0.4",sass:"^1.44.0",vue:"^3.2.23","vue-router":"4",vuex:"^4.0.2"},rt={"@vitejs/plugin-vue":"^1.9.3",typescript:"^4.4.3","unplugin-auto-import":"^0.5.1","unplugin-vue-components":"^0.17.2",vite:"^2.6.4","vue-tsc":"^0.3.0"};var lt={name:nt,version:st,scripts:ct,dependencies:ot,devDependencies:rt};const F=he({state:{version:lt.version},mutations:{setSelectAddress(u,e){u.selectAddress=e}},actions:{},modules:{scenario:Ye,player:Ze,game:at}});var V=(u,e)=>{const a=u.__vccOpts||u;for(const[o,_]of e)a[o]=_;return a};const _t={class:"header"},dt=w(" \u597D\u65E5\u5B50\u90FD\u5728\u4E0B\u8F88\u5B50 "),it={class:"version"},mt=P({setup(u){return(e,a)=>(c(),g("div",_t,[dt,y("span",it,"v"+v(A(F).state.version),1)]))}});var ue=V(mt,[["__scopeId","data-v-57a8e47e"]]);const ae=P({setup(u){return(e,a)=>(c(),g("div",null,"github,qqGourp,andsoon"))}});const pt=u=>(U("data-v-6bf49a2c"),u=u(),j(),u),ft=pt(()=>y("h1",null,"\u9009\u62E9\u4F60\u8981\u6E38\u73A9\u7684\u5267\u672C:",-1)),Et=P({setup(u){const e=q(O),a=o=>{F.dispatch("changeScenario",o),k.push({name:"create",params:{scenarioName:o}})};return(o,_)=>{const s=K,l=L,m=W,i=T,f=H,t=M,E=Q,p=X,D=Y;return c(),h(D,{class:"page"},{default:n(()=>[r(s,null,{default:n(()=>[r(ue)]),_:1}),r(E,null,{default:n(()=>[ft,r(t,{gutter:20},{default:n(()=>[r(f,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[(c(!0),g($,null,S(A(e),(b,d)=>(c(),h(i,{class:"scenarioItem",onClick:N=>a(d)},{default:n(()=>[r(m,{title:b.name},{default:n(()=>[r(l,{label:"\u63CF\u8FF0\uFF1A"},{default:n(()=>[w(v(b.info),1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})]),_:1}),r(p,null,{default:n(()=>[r(ae)]),_:1})]),_:1})}}});var vt=V(Et,[["__scopeId","data-v-6bf49a2c"]]);const gt=P({props:{createrItem:null},setup(u){const e=u,a=J(),o=l=>{const m=e.createrItem.values.find(i=>i.name===l);a.emit("change",m),a.emit("changeData",m)},_=q(),s=l=>x.isEmpty(l.attrSet)&&x.isEmpty(l.attrAdd)&&x.isEmpty(l.attrReduce);return(l,m)=>{const i=H,f=M,t=L,E=Z,p=W,D=ye,b=Ce;return c(),g("div",null,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"container"},{default:n(()=>[r(b,{class:"content",border:"",onChange:o,modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=d=>_.value=d)},{default:n(()=>[(c(!0),g($,null,S(e.createrItem.values,d=>(c(),h(D,{class:"item",label:d.name},{default:n(()=>[r(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(c(),h(t,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[y("span",{class:z(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(c(),h(t,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[w(v(d.info),1)]),_:2},1024)):R("",!0),s(d)?R("",!0):(c(),h(t,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(c(!0),g($,null,S(d.attrSet,(C,B)=>(c(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(C),1))),128)),(c(!0),g($,null,S(d.attrAdd,(C,B)=>(c(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(C),1))),128)),(c(!0),g($,null,S(d.attrReduce,(C,B)=>(c(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(C),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(c(),h(t,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(c(!0),g($,null,S(d.flagAdd,C=>(c(),h(E,{type:"info"},{default:n(()=>[w(v(C),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var Bt=V(gt,[["__scopeId","data-v-3a01fed0"]]);const ht={class:"container"},yt=P({props:{createrItem:null},setup(u){const e=u,a=J(),o=s=>{if(!s)return;const l={attrSet:{[e.createrItem.values.attrName]:s}};a.emit("changeData",l)},_=q();return(s,l)=>{const m=H,i=M,f=Ae;return c(),g("div",ht,[r(i,null,{default:n(()=>[r(m,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(i,{class:"container"},{default:n(()=>[r(f,{class:"content",onInput:o,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=t=>_.value=t),placeholder:e.createrItem.values.info},null,8,["modelValue","placeholder"])]),_:1})])}}});var Ct=V(yt,[["__scopeId","data-v-dcda753e"]]);const de=u=>(U("data-v-86fe8a28"),u=u(),j(),u),At={class:"container"},Ft={class:"info"},Dt={class:"decs"},xt={class:"res"},bt=de(()=>y("span",null," -> ",-1)),Nt=de(()=>y("span",null,"\u70B9\u6570:",-1)),kt=P({props:{createrItem:null},setup(u){const e=u,a=J(),o=l=>{const m={attrAdd:{},attrReduce:{},cost:0};for(const i in s)if(Object.prototype.hasOwnProperty.call(s,i)){const f=s[i];if(f>0){m.attrAdd[i]=Math.abs(f);const t=e.createrItem.values.find(E=>E.attrName===i);m.cost+=f*t.cost}if(f<0){m.attrReduce[i]=Math.abs(f);const t=e.createrItem.values.find(E=>E.attrName===i);m.cost+=f*t.cost}}a.emit("changeData",m)},_=x.cloneDeep(F.state.player.attr),s=ee(x.mapValues(_,()=>0));return(l,m)=>{const i=H,f=M,t=Fe,E=T;return c(),g("div",At,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"content"},{default:n(()=>[(c(!0),g($,null,S(e.createrItem.values,p=>(c(),h(E,{class:"content-card"},{default:n(()=>[y("div",Ft,[w(v(p.attrName)+": ",1),y("span",Dt,"\u6BCF\u70B9\u8C03\u6574\u6D88\u8017/\u589E\u52A0 "+v(p.cost)+"\u70B9 \u70B9\u6570:",1)]),r(t,{modelValue:A(s)[p.attrName],"onUpdate:modelValue":D=>A(s)[p.attrName]=D,min:-p.maxModify,max:p.maxModify,onChange:o},null,8,["modelValue","onUpdate:modelValue","min","max"]),y("div",xt,[y("span",null,[y("span",null,v(A(F).state.player.attr[p.attrName]-A(s)[p.attrName]),1),bt,y("span",null,v(A(F).state.player.attr[p.attrName]),1)]),y("span",null,[Nt,y("span",{class:z(A(s)[p.attrName]*p.cost>=0?"reduce":"add")},v(A(s)[p.attrName]*p.cost>=0?"":"+"),3),y("span",{class:z(A(s)[p.attrName]*p.cost>=0?"reduce":"add")},v(-A(s)[p.attrName]*p.cost),3)])])]),_:2},1024))),256))]),_:1})])}}});var $t=V(kt,[["__scopeId","data-v-86fe8a28"]]);const It=P({props:{createrItem:null},setup(u){const e=u,a=J(),o=l=>{const m=e.createrItem.values.filter(i=>l.includes(i.name));a.emit("change",m),a.emit("changeData",m)},_=q([]),s=l=>x.isEmpty(l.attrSet)&&x.isEmpty(l.attrAdd)&&x.isEmpty(l.attrReduce);return(l,m)=>{const i=H,f=M,t=L,E=Z,p=W,D=De,b=xe;return c(),g("div",null,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"container"},{default:n(()=>[r(b,{class:"content",onChange:o,modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=d=>_.value=d)},{default:n(()=>[(c(!0),g($,null,S(e.createrItem.values,d=>(c(),h(D,{class:"item",label:d.name},{default:n(()=>[r(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(c(),h(t,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[y("span",{class:z(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(c(),h(t,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[w(v(d.info),1)]),_:2},1024)):R("",!0),s(d)?R("",!0):(c(),h(t,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(c(!0),g($,null,S(d.attrSet,(C,B)=>(c(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(C),1))),128)),(c(!0),g($,null,S(d.attrAdd,(C,B)=>(c(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(C),1))),128)),(c(!0),g($,null,S(d.attrReduce,(C,B)=>(c(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(C),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(c(),h(t,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(c(!0),g($,null,S(d.flagAdd,C=>(c(),h(E,{type:"info"},{default:n(()=>[w(v(C),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var wt=V(It,[["__scopeId","data-v-00462d1d"]]);const St={class:"sticky"},Rt=w("\u770B\u770B\u8FD9\u8F88\u5B50\u8FC7\u7684\u600E\u4E48\u6837"),Pt=P({props:{creater:null,baseAttr:null},setup(u){const e=u,a=ee([]),o=q(e.baseAttr.cost),_=function(){let t=x.cloneDeep(e.baseAttr),E=x.assign({flags:[],attr:{}},t),p=t.cost;a.forEach(D=>{x.isArray(D)&&D.forEach(b=>{[E,p]=s(E,b,p)}),[E,p]=s(E,D,p)}),o.value=p,F.dispatch("setPlayerData",re({},E))},s=function(t,E,p){const{flagAdd:D,flagDelete:b,attrSet:d,attrAdd:N,attrReduce:C,cost:B}=E;x.isEmpty(b)||x.pull(t.flags,...b),x.isEmpty(D)||t.flags.push(...D);for(const I in d)if(Object.prototype.hasOwnProperty.call(d,I)){const G=d[I];t.attr[I]=G}for(const I in N)if(Object.prototype.hasOwnProperty.call(N,I)){const G=N[I];t.attr[I]=x.defaultTo(t.attr[I],0),t.attr[I]+=G}for(const I in C)if(Object.prototype.hasOwnProperty.call(C,I)){const G=C[I];t.attr[I]=x.defaultTo(t.attr[I],0),t.attr[I]-=G}return B&&(p-=B),[t,p]},l=(t,E)=>{a[t]=E,_()},m=()=>e.creater.every((t,E)=>{if(t.require){const p=a[E],D=!x.isEmpty(p);if(!D)throw t.groupName;return D}else return!0}),i=()=>{try{const t=m();o.value<0?le({title:"\u70B9\u6570\u4E0D\u591F\u7528\u554A",message:"\u5269\u4F59\u70B9\u6570\u4E0D\u591F\u7528\u554A",type:"error"}):o.value>0?be.confirm("\u4F60\u70B9\u6570\u8FD8\u6709\u5269\u7684\u54E6,\u771F\u7684\u5C31\u8FD9\u6837\u4E48??","Warning",{confirmButtonText:"\u8001\u5B50\u4E50\u610F",cancelButtonText:"\u7B49\u6211\u82B1\u5149",type:"warning"}).then(()=>{_e({type:"success",message:"\u5927\u5144\u5F1F\u725B\u903C\u554A"}),f()}).catch(()=>{_e({type:"info",message:"\u597D\u561E,\u7B49\u4F60"})}):f()}catch(t){le({title:"\u5C11\u9009\u4E86\u4E1C\u897F\u554A",message:`${t},\u662F\u5FC5\u586B/\u5FC5\u9009\u9879`,type:"error"})}},f=()=>{F.dispatch("startGame"),k.push({name:"play"})};return(t,E)=>{const p=T,D=te,b=H,d=M;return c(),g($,null,[y("div",St,[r(p,{type:"primary"},{default:n(()=>[w("\u5269\u4F59\u70B9\u6570:"+v(o.value),1)]),_:1})]),(c(!0),g($,null,S(e.creater,(N,C)=>(c(),g("div",null,[N.type==="\u5355\u9009\u5668"?(c(),h(Bt,{key:0,createrItem:N,onChangeData:B=>{l(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u591A\u9009\u5668"?(c(),h(wt,{key:1,createrItem:N,onChangeData:B=>{l(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6587\u672C\u8F93\u5165"?(c(),h(Ct,{key:2,createrItem:N,onChangeData:B=>{l(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6570\u636E\u8C03\u6574"?(c(),h($t,{key:3,createrItem:N,onChangeData:B=>{l(C,B)}},null,8,["createrItem","onChangeData"])):R("",!0)]))),256)),y("div",null,[r(d,null,{default:n(()=>[r(b,{span:24,class:"btn"},{default:n(()=>[r(D,{class:"big",type:"primary",onClick:i},{default:n(()=>[Rt]),_:1})]),_:1})]),_:1})])],64)}}});var Vt=V(Pt,[["__scopeId","data-v-e4e6d4b2"]]);const Ht={class:"content"},Mt={class:"propertie"},Gt=P({setup(u){const e=O[F.state.scenario.scenarioName],a=(o,_)=>{var l,m;const s=(l=e==null?void 0:e.properties)==null?void 0:l[o];if(s){const i=s.filter(t=>x.inRange(_,...t.range)),f=x.random(0,i.length-1);return(m=i==null?void 0:i[f])==null?void 0:m.desc}};return(o,_)=>{const s=L,l=W,m=Z,i=Ne,f=T;return c(),h(f,{class:"box-card"},{default:n(()=>[r(i,null,{default:n(()=>[y("div",Ht,[r(l,{title:"\u89D2\u8272\u5C5E\u6027",column:1},{default:n(()=>[(c(!0),g($,null,S(A(F).state.player.attr,(t,E)=>(c(),h(s,{key:E+t,label:E},{default:n(()=>[w(v(t),1),y("span",Mt,v(a(E,t)),1)]),_:2},1032,["label"]))),128))]),_:1}),(c(!0),g($,null,S(A(F).state.player.flags,(t,E)=>(c(),h(m,{key:E,class:"flags"},{default:n(()=>[w(v(t),1)]),_:2},1024))),128))])]),_:1})]),_:1})}}});var ie=V(Gt,[["__scopeId","data-v-064ee701"]]);const Ot=u=>(U("data-v-03b1dc2c"),u=u(),j(),u),Tt=Ot(()=>y("h2",null,"\u521B\u5EFA\u89D2\u8272",-1)),qt=P({setup(u){var _,s,l,m,i,f,t,E,p,D,b,d,N,C,B,I,G,se;((l=(s=(_=k==null?void 0:k.currentRoute)==null?void 0:_.value)==null?void 0:s.params)==null?void 0:l.scenarioName)!==((i=(m=F==null?void 0:F.state)==null?void 0:m.scenario)==null?void 0:i.scenarioName)&&((E=(t=(f=k==null?void 0:k.currentRoute)==null?void 0:f.value)==null?void 0:t.params)==null?void 0:E.scenarioName)&&F.dispatch("changeScenario",(b=(D=(p=k==null?void 0:k.currentRoute)==null?void 0:p.value)==null?void 0:D.params)==null?void 0:b.scenarioName),!((C=(N=(d=k==null?void 0:k.currentRoute)==null?void 0:d.value)==null?void 0:N.params)==null?void 0:C.scenarioName)&&!((I=(B=F==null?void 0:F.state)==null?void 0:B.scenario)==null?void 0:I.scenarioName)&&k.push({name:"HelloWorld"});const e=O[(se=(G=F.state)==null?void 0:G.scenario)==null?void 0:se.scenarioName];e||k.push({name:"HelloWorld"});const{creater:a,baseAttr:o}=e;return(_u,du)=>{const me=K,pe=Q,fe=X,Ee=Y;return c(),h(Ee,{class:"page"},{default:n(()=>[r(me,null,{default:n(()=>[r(ue)]),_:1}),r(pe,null,{default:n(()=>[y("h1",null,v(A(O).name),1),Tt,r(Vt,{creater:A(a),baseAttr:A(o)},null,8,["creater","baseAttr"]),r(ie)]),_:1}),r(fe,null,{default:n(()=>[r(ae)]),_:1})]),_:1})}}});var Lt=V(qt,[["__scopeId","data-v-03b1dc2c"]]);const Wt={class:"event"},Ut={key:0,class:"eventRes"},jt=P({setup(u){const e=a=>{const{choosen:o,options:_}=a,s=_.find(m=>m.label===o);return s==null?void 0:s.choosenText};return(a,o)=>{var m,i,f;const _=T,s=H,l=M;return c(!0),g($,null,S((f=(i=(m=A(F))==null?void 0:m.state)==null?void 0:i.game)==null?void 0:f.historyActions,(t,E)=>(c(),h(l,{gutter:20},{default:n(()=>[r(s,{span:24},{default:n(()=>[r(_,{class:"box-card"},{default:n(()=>[y("div",Wt,v(t.text),1),e(t)?(c(),g("div",Ut,v(e(t)),1)):R("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)}}});var zt=V(jt,[["__scopeId","data-v-19e6628f"]]);const Jt=P({async setup(u){let e,a,o=ee({});const _=(l,m)=>{const i=x.cloneDeep(l);i.choosen=m,F.dispatch("newActionHistory",i),s()},s=async()=>{const l=await F.dispatch("getNewEvent");return o=l,l};return[e,a]=ke(()=>s()),await e,a(),(l,m)=>{const i=H,f=M,t=te,E=T;return c(),h(E,{class:"currentEvent"},{default:n(()=>{var p,D;return[r(f,{gutter:20},{default:n(()=>[r(i,{span:24},{default:n(()=>{var b;return[y("div",null,v((b=A(o))==null?void 0:b.text),1)]}),_:1})]),_:1}),((D=(p=A(o))==null?void 0:p.options)==null?void 0:D.length)?(c(),h(f,{key:0,gutter:20},{default:n(()=>[r(i,{span:24,class:"operation"},{default:n(()=>[(c(!0),g($,null,S(A(o).options,b=>(c(),h(t,{onClick:d=>_(A(o),b.label),type:"primary"},{default:n(()=>[w(v(b.label),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})):R("",!0)]}),_:1})}}});var Kt=V(Jt,[["__scopeId","data-v-754fc3b9"]]);const Qt=u=>(U("data-v-39060b85"),u=u(),j(),u),Xt=Qt(()=>y("h1",{class:"gameEnd"},"\u6E38\u620F\u7ED3\u675F",-1)),Yt={class:"title"},Zt={class:"text"},eu={class:"bnts"},tu=w("\u56DE\u5230\u9996\u9875"),uu=w("\u518D\u6765\u4E00\u628A"),au=P({setup(u){const e=F.state.game.end,a=()=>{k.push({name:"HelloWorld"})},o=()=>{const _=k.push({name:"create",params:{scenarioName:_}})};return(_,s)=>{const l=H,m=M,i=T,f=te;return c(),g($,null,[Xt,r(i,{class:"currentEvent"},{default:n(()=>[r(m,{gutter:20},{default:n(()=>[r(l,{span:24},{default:n(()=>{var t;return[y("div",Yt,v((t=A(e))==null?void 0:t.title),1)]}),_:1}),r(l,{span:24},{default:n(()=>{var t;return[y("div",Zt,v((t=A(e))==null?void 0:t.text),1)]}),_:1})]),_:1})]),_:1}),r(m,{gutter:20},{default:n(()=>[r(l,{span:24},{default:n(()=>[y("div",eu,[r(f,{type:"primary",plain:"",onClick:a},{default:n(()=>[tu]),_:1}),r(f,{type:"primary",plain:"",onClick:o},{default:n(()=>[uu]),_:1})])]),_:1})]),_:1})],64)}}});var nu=V(au,[["__scopeId","data-v-39060b85"]]);const su={class:"content"},cu=P({setup(u){var o,_;window.scrollTo(0,0);const e=O[(_=(o=F.state)==null?void 0:o.scenario)==null?void 0:_.scenarioName],a=$e(()=>{var s,l,m,i;return console.log((l=(s=F.state)==null?void 0:s.game)==null?void 0:l.end),!x.isEmpty((i=(m=F.state)==null?void 0:m.game)==null?void 0:i.end)});return(s,l)=>{const m=K,i=Ie,f=Q,t=X,E=Y;return c(),h(E,{class:"page"},{default:n(()=>[r(m,null,{default:n(()=>[r(ue)]),_:1}),r(f,null,{default:n(()=>{var p;return[y("div",su,[y("h1",null,"\u5267\u672C:"+v((p=A(e))==null?void 0:p.name),1),r(i,{target:".content"},{default:n(()=>[r(ie)]),_:1}),r(zt),A(a)?R("",!0):(c(),h(Kt,{key:0})),A(a)?(c(),h(nu,{key:1})):R("",!0)])]}),_:1}),r(t,null,{default:n(()=>[r(ae)]),_:1})]),_:1})}}});var ou=V(cu,[["__scopeId","data-v-58e20ff3"]]);const ru=[{path:"/create/:scenarioName",component:Lt,name:"create",props:!0},{path:"/play",component:ou,name:"play"},{path:"/",component:vt,name:"HelloWorld"}],k=we({history:Se(),routes:ru});const lu=P({setup(u){return(e,a)=>{const o=Re("router-view");return c(),h(Pe,null,{default:n(()=>[r(o)]),_:1})}}}),ne=Ve(lu);ne.use(F);ne.use(k);k.isReady().then(()=>ne.mount("#app"));
