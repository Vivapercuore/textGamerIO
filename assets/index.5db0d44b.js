var he=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var re=(t,e,u)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,le=(t,e)=>{for(var u in e||(e={}))Be.call(e,u)&&re(t,u,e[u]);if(oe)for(var u of oe(e))ye.call(e,u)&&re(t,u,e[u]);return t};import{_ as C,c as Ce,d as P,o,a as g,b as h,t as v,u as F,e as w,p as L,f as W,r as q,E as K,g as U,h as j,i as T,j as M,k as H,l as X,m as Y,n as Z,q as y,w as n,s as r,v as S,F as k,x as Ae,y as Fe,z as Q,A as R,B as ee,C as z,D as De,G as _e,H as xe,I as be,J as Ne,K as te,L as de,M as $e,N as ie,O as ke,P as Ie,Q as we,R as Se,S as Re,T as Pe,U as Ve,V as Me,W as He}from"./vendor.ce8910e5.js";const Ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))s(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function u(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerpolicy&&(c.referrerPolicy=_.referrerpolicy),_.crossorigin==="use-credentials"?c.credentials="include":_.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(_){if(_.ep)return;_.ep=!0;const c=u(_);fetch(_.href,c)}};Ge();const Oe={cost:10,attr:{\u59D3\u540D:"",\u79CD\u65CF:"",\u5E74\u9F84:0,\u5E78\u8FD0:10,\u529B\u91CF:10,\u654F\u6377:10,\u7CBE\u795E:10,\u9B45\u529B:10,\u667A\u529B:10,\u8D22\u5BCC:10}},Te=[{range:[0,3],desc:"\u5F31\u4E0D\u7981\u98CE"},{range:[3,5],desc:"\u80FD\u548C\u516C\u9E21\u5927\u6218\u516B\u767E\u56DE\u5408"},{range:[5,8],desc:"\u624B\u6709\u6740\u9E21\u4E4B\u529B"},{range:[8,15],desc:"\u5288\u67F4\u6311\u6C34\u4E0D\u5728\u8BDD\u4E0B"},{range:[15,25],desc:"\u96BE\u5F97\u4E00\u89C1\u7684\u5927\u529B\u58EB"},{range:[20,45],desc:"\u8FD9\u80AF\u5B9A\u662F\u4E2A\u5927\u808C\u9738"},{range:[45,70],desc:"\u5965\u8FD0\u4F1A\u9009\u624B"},{range:[65,85],desc:"\u5DF2\u7ECF\u63A5\u8FD1\u4EBA\u7C7B\u7684\u6781\u9650\u4E86"},{range:[80,100],desc:"\u6C14\u62D4\u5C71\u516E\u529B\u76D6\u4E16"},{range:[100,999],desc:"\u771F\u7684\u8FD8\u7B97\u4EBA\u7C7B\u5417"}],qe={\u5E74\u9F84:[{range:[0,3],desc:"\u5E7C\u513F"},{range:[3,8],desc:"\u5C11\u5E74"}],\u529B\u91CF:Te},Le={require:!0,groupName:"\u59D3\u540D",type:"\u6587\u672C\u8F93\u5165",values:{name:"\u89D2\u8272\u59D3\u540D",info:"\u8D77\u4E2A\u540D\u5B57\u5427",attrName:"\u59D3\u540D"}},We={require:!0,groupName:"\u79CD\u65CF",type:"\u5355\u9009\u5668",values:[{name:"\u9F99",info:"\u957F\u7FC5\u8180\u7684\u5927\u8725\u8734",cost:8,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u9F99"},attrAdd:{\u529B\u91CF:10},attrReduce:{}},{name:"\u72D7\u5934\u4EBA",info:"\u636E\u8BF4\u6709\u5DE8\u9F99\u8840\u7EDF",cost:1,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u72D7\u5934\u4EBA"},attrAdd:{\u7CBE\u795E:5},attrReduce:{\u9B45\u529B:3}},{name:"\u4EBA\u7C7B",info:"\u72E1\u8BC8\u7684\u5F02\u4E61\u4EBA",cost:1,flagAdd:[],flagDelete:[],attrSet:{\u79CD\u65CF:"\u4EBA\u7C7B"},attrAdd:{\u667A\u529B:1},attrReduce:{}}]},Ue={require:!0,groupName:"\u6027\u522B",type:"\u5355\u9009\u5668",values:[{name:"\u65E0\u6027",info:"\u6CA1\u6709\u90A3\u79CD\u4E16\u4FD7\u7684\u6B32\u671B",cost:1,flagAdd:["\u65E0\u6027"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:2},attrReduce:{}},{name:"\u7537",info:"\u7537\u5B69\u5B50\u4E00\u822C\u4F1A\u5F3A\u58EE\u4E00\u70B9\u5427",cost:1,flagAdd:["\u7537"],flagDelete:[],attrSet:{},attrAdd:{\u529B\u91CF:2},attrReduce:{}},{name:"\u5973",info:"\u8F6F\u8F6F\u9999\u9999\u7684\u5973\u5B69\u5B50",cost:1,flagAdd:["\u5973"],flagDelete:[],attrSet:{},attrAdd:{\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}}]},je={},Qe={groupName:"\u5C5E\u6027\u8C03\u6574",type:"\u6570\u636E\u8C03\u6574",values:[{min:0,max:999,attrName:"\u529B\u91CF",cost:1,maxModify:5},{min:0,max:999,attrName:"\u654F\u6377",cost:1,maxModify:5},{min:0,max:999,attrName:"\u667A\u529B",cost:1,maxModify:5},{min:0,max:999,attrName:"\u8D22\u5BCC",cost:1,maxModify:5},{min:0,max:999,attrName:"\u7CBE\u795E",cost:1,maxModify:5},{min:0,max:999,attrName:"\u9B45\u529B",cost:1,maxModify:5}]},ze={require:!1,groupName:"\u7279\u6027",type:"\u591A\u9009\u5668",values:[{name:"\u51FA\u8EAB\u8D35\u65CF",info:"\u81F3\u5C11\u4E0D\u662F\u8DEA\u65CF",cost:4,flagAdd:["\u8D35\u65CF"],flagDelete:[],attrSet:{},attrAdd:{\u8D22\u5BCC:5,\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}},{name:"\u6276\u5979",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u6276\u5979"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}},{name:"\u7537\u540C",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u7537\u540C"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}}]},Je=[Le,We,Ue,je,ze,Qe],Ke={eventPackName:"\u4EBA\u751F",events:[{name:"\u5E73\u5E73\u65E0\u5947\u7684\u751F\u6D3B",text:"\u5E73\u5B89\u65E0\u4E8B\u7684\u5EA6\u8FC7\u4E86\u4E00\u5E74",options:[{label:"\u65B0\u5E74\u5FEB\u4E50",goto:[]}]}]},Xe=[{name:"default",text:"\u51C6\u5907\u597D\u51FA\u751F\u4E86\u4E48",options:[{label:"\u5F00\u59CB\u8F6C\u751F",choosenText:"\u4F60\u51FA\u751F\u4E86",goto:[]},{label:"\u6211\u540E\u6094\u4E86",choosenText:"\u80CE\u6B7B\u8179\u4E2D",goto:["\u80CE\u6B7B\u8179\u4E2D"]}]},Ke],Ye=[{name:"default",title:"\u5C31\u505A\u4E86\u8FD9\u4E48\u70B9\u513F",text:"\u6CA1\u4E86,\u4F5C\u8005\u592A\u61D2\u4E86,\u6CA1\u66F4\u65B0,\u770B\u5230\u8FD9\u4E2A\u7684\u8BDD\u8BF7\u53BB\u50AC\u4F5C\u8005\u66F4\u65B0"},{name:"\u80CE\u6B7B\u8179\u4E2D",title:"\u80CE\u6B7B\u8179\u4E2D",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0(\u4F5C\u8005\u8FD8\u6CA1\u505A\u597D\u8FD9\u4E2A\u663E\u793A)}}\u9884\u89C1\u5230\u4E86\u4ED6\u60B2\u60E8\u7684\u4E00\u751F,\u751A\u81F3\u4E0D\u613F\u610F\u964D\u4E34\u5230\u8FD9\u4E16\u4E0A"},{name:"\u96BE\u4EA7",title:"\u96BE\u4EA7\u800C\u6B7B",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0(\u4F5C\u8005\u8FD8\u6CA1\u505A\u597D\u8FD9\u4E2A\u663E\u793A)}},\u4ED6\u7684\u6BCD\u4EB2\u96BE\u4EA7\u4E86,\u63D0\u524D\u7ED3\u675F\u4E86\u4E00\u751F,\u987A\u4FBF\u5BB3\u6B7B\u4E86\u4ED6\u7684\u6BCD\u4EB2"}],Ze={name:"\u5F02\u754C\u8F6C\u751F",info:"\u56E0\u4E3A\u521A\u5F00\u59CB\u505A,\u6240\u4EE5,\u4F60\u80AF\u5B9A\u53EA\u80FD\u80CE\u6B7B\u8179\u4E2D\u7684,\u522B\u6323\u624E\u4E86,\u4F5C\u8005\u538B\u6839\u6CA1\u505A\u5176\u4ED6\u7ED3\u5C40",baseAttr:Oe,creater:Je,properties:qe,events:Xe,ends:Ye};var O={reincarnation:Ze};const et={state:()=>({scenarioName:""}),mutations:{changeScenario(t,e){t.scenarioName=e}},actions:{changeScenario({commit:t,dispatch:e},u){if(!u)return;t("changeScenario",u);const s=O[u];e("setPlayerData",s.baseAttr)}}},tt={state:()=>({flags:[],attr:{}}),mutations:{setPlayerData(t,e){C.assign(t,e)}},actions:{setPlayerData({commit:t,dispatch:e},u){t("setPlayerData",u)}},modules:{}};function ut(t,e){let u=at(t);if(C.remove(u,function(s){return C.find(e,{name:s.name})}),e.length===0){const s=u.find(_=>_.name==="default");if(s)return s}if((u==null?void 0:u.length)>0){const s=C.random(0,u.length-1);return u[s]}return{}}function at(t){const e=[];return t.forEach(u=>{u.name&&e.push(u),u.eventPackName&&u.events&&e.push(...u.events)}),e}function nt(t,e){if(e){const u=t.find(s=>s.name===e);if(u)return u}return{}}function st(t,e,u){const s=[];s.push(...t);const _=s.find(c=>c.name==="default");return _||{}}const ct={getNewEvent:ut,findEnd:nt,getEnd:st},ue={event:ct},ot={state:()=>({end:{},historyActions:[]}),mutations:{newActionHistory(t,e){t.historyActions.push(e)},startGame(t){t.end={},t.historyActions=[]},endGame(t,e){t.end=e}},actions:{newActionHistory({commit:t,dispatch:e},u){t("newActionHistory",u)},startGame({commit:t}){t("startGame")},endGame({commit:t,dispatch:e,rootState:u},s){t("endGame",s)},eventChain({commit:t,dispatch:e,rootState:u}){return new Promise(async(s,_)=>{var m;let c;const l=C.last(u.game.historyActions);if(l){const{choosen:i,options:f}=l,a=f.find(E=>E.label===i);if(((m=a==null?void 0:a.goto)==null?void 0:m.length)>0){const E=C.random(0,a.goto.length-1);c=a.goto[E]}}if(c){const i=u.scenario.scenarioName||"reincarnation",f=O[i],a=ue.event.findEnd(f.ends,c);C.isEmpty(a)?(e("endGame",a),s(a)):s()}else s()})},getNewEvent({commit:t,dispatch:e,rootState:u}){return new Promise(async(s,_)=>{const c=u.scenario.scenarioName||"reincarnation",l=u.game.historyActions||"reincarnation";c||_("no scenario");const m=O[c],i=await e("eventChain");if(i)s(i);else{const f=ue.event.getNewEvent(m.events,l);if(!C.isEmpty(f))s(f);else{const{attr:a,flags:E}=u.player,p=ue.event.getEnd(m.ends,a,E);e("endGame",p),s(p)}}})}},modules:{}},rt="text-gamer",lt="0.1.0",_t={dev:"vite",build:"vue-tsc --noEmit && vite build",serve:"vite preview"},dt={"element-plus":"^1.2.0-beta.5",less:"^4.1.2",loadsh:"^0.0.4",sass:"^1.44.0",vue:"^3.2.23","vue-router":"4",vuex:"^4.0.2"},it={"@vitejs/plugin-vue":"^1.9.3",typescript:"^4.4.3","unplugin-auto-import":"^0.5.1","unplugin-vue-components":"^0.17.2",vite:"^2.6.4","vue-tsc":"^0.3.0"};var mt={name:rt,version:lt,scripts:_t,dependencies:dt,devDependencies:it};const x=Ce({state:{version:mt.version},mutations:{setSelectAddress(t,e){t.selectAddress=e}},actions:{},modules:{scenario:et,player:tt,game:ot}});var V=(t,e)=>{const u=t.__vccOpts||t;for(const[s,_]of e)u[s]=_;return u};const pt={class:"header"},ft=w(" \u597D\u65E5\u5B50\u90FD\u5728\u4E0B\u8F88\u5B50 "),Et={class:"version"},vt=P({setup(t){return(e,u)=>(o(),g("div",pt,[ft,h("span",Et,"v"+v(F(x).state.version),1)]))}});var ae=V(vt,[["__scopeId","data-v-5895b07c"]]);const J=t=>(L("data-v-4ac8511c"),t=t(),W(),t),gt={class:"foot"},ht=J(()=>h("a",{class:"link",href:"https://github.com/Vivapercuore/textGamer"},"github",-1)),Bt=J(()=>h("span",{class:"author"},"\u4F5C\u8005:vivapercuore",-1)),yt=J(()=>h("span",{class:"qq"},"QQ:986887506",-1)),Ct=J(()=>h("a",{class:"link",href:"https://github.com/Vivapercuore/textGamerIO/blob/main/README.md"}," \u8BF4\u660E ",-1)),At=[ht,Bt,yt,Ct],Ft=P({setup(t){return(e,u)=>(o(),g("div",gt,At))}});var ne=V(Ft,[["__scopeId","data-v-4ac8511c"]]);const Dt=t=>(L("data-v-6bf49a2c"),t=t(),W(),t),xt=Dt(()=>h("h1",null,"\u9009\u62E9\u4F60\u8981\u6E38\u73A9\u7684\u5267\u672C:",-1)),bt=P({setup(t){const e=q(O),u=s=>{x.dispatch("changeScenario",s),$.push({name:"create",params:{scenarioName:s}})};return(s,_)=>{const c=K,l=U,m=j,i=T,f=M,a=H,E=X,p=Y,D=Z;return o(),y(D,{class:"page"},{default:n(()=>[r(c,null,{default:n(()=>[r(ae)]),_:1}),r(E,null,{default:n(()=>[xt,r(a,{gutter:20},{default:n(()=>[r(f,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[(o(!0),g(k,null,S(F(e),(b,d)=>(o(),y(i,{class:"scenarioItem",onClick:N=>u(d)},{default:n(()=>[r(m,{title:b.name},{default:n(()=>[r(l,{label:"\u63CF\u8FF0\uFF1A"},{default:n(()=>[w(v(b.info),1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})]),_:1}),r(p,null,{default:n(()=>[r(ne)]),_:1})]),_:1})}}});var Nt=V(bt,[["__scopeId","data-v-6bf49a2c"]]);const $t=P({props:{createrItem:null},setup(t){const e=t,u=z(),s=l=>{const m=e.createrItem.values.find(i=>i.name===l);u.emit("change",m),u.emit("changeData",m)},_=q(),c=l=>C.isEmpty(l.attrSet)&&C.isEmpty(l.attrAdd)&&C.isEmpty(l.attrReduce);return(l,m)=>{const i=M,f=H,a=U,E=ee,p=j,D=Ae,b=Fe;return o(),g("div",null,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"container"},{default:n(()=>[r(b,{class:"content",border:"",onChange:s,modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=d=>_.value=d)},{default:n(()=>[(o(!0),g(k,null,S(e.createrItem.values,d=>(o(),y(D,{class:"item",label:d.name},{default:n(()=>[r(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(o(),y(a,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[h("span",{class:Q(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(o(),y(a,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[w(v(d.info),1)]),_:2},1024)):R("",!0),c(d)?R("",!0):(o(),y(a,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(o(!0),g(k,null,S(d.attrSet,(A,B)=>(o(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(A),1))),128)),(o(!0),g(k,null,S(d.attrAdd,(A,B)=>(o(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(A),1))),128)),(o(!0),g(k,null,S(d.attrReduce,(A,B)=>(o(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(A),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(o(),y(a,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(o(!0),g(k,null,S(d.flagAdd,A=>(o(),y(E,{type:"info"},{default:n(()=>[w(v(A),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var kt=V($t,[["__scopeId","data-v-3a01fed0"]]);const It={class:"container"},wt=P({props:{createrItem:null},setup(t){const e=t,u=z(),s=c=>{if(!c)return;const l={attrSet:{[e.createrItem.values.attrName]:c}};u.emit("changeData",l)},_=q();return(c,l)=>{const m=M,i=H,f=De;return o(),g("div",It,[r(i,null,{default:n(()=>[r(m,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(i,{class:"container"},{default:n(()=>[r(f,{class:"content",onInput:s,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value=a),placeholder:e.createrItem.values.info},null,8,["modelValue","placeholder"])]),_:1})])}}});var St=V(wt,[["__scopeId","data-v-dcda753e"]]);const me=t=>(L("data-v-86fe8a28"),t=t(),W(),t),Rt={class:"container"},Pt={class:"info"},Vt={class:"decs"},Mt={class:"res"},Ht=me(()=>h("span",null," -> ",-1)),Gt=me(()=>h("span",null,"\u70B9\u6570:",-1)),Ot=P({props:{createrItem:null},setup(t){const e=t,u=z(),s=l=>{const m={attrAdd:{},attrReduce:{},cost:0};for(const i in c)if(Object.prototype.hasOwnProperty.call(c,i)){const f=c[i];if(f>0){m.attrAdd[i]=Math.abs(f);const a=e.createrItem.values.find(E=>E.attrName===i);m.cost+=f*a.cost}if(f<0){m.attrReduce[i]=Math.abs(f);const a=e.createrItem.values.find(E=>E.attrName===i);m.cost+=f*a.cost}}u.emit("changeData",m)},_=C.cloneDeep(x.state.player.attr),c=_e(C.mapValues(_,()=>0));return(l,m)=>{const i=M,f=H,a=xe,E=T;return o(),g("div",Rt,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"content"},{default:n(()=>[(o(!0),g(k,null,S(e.createrItem.values,p=>(o(),y(E,{class:"content-card"},{default:n(()=>[h("div",Pt,[w(v(p.attrName)+": ",1),h("span",Vt,"\u6BCF\u70B9\u8C03\u6574\u6D88\u8017/\u589E\u52A0 "+v(p.cost)+"\u70B9 \u70B9\u6570:",1)]),r(a,{modelValue:F(c)[p.attrName],"onUpdate:modelValue":D=>F(c)[p.attrName]=D,min:-p.maxModify,max:p.maxModify,onChange:s},null,8,["modelValue","onUpdate:modelValue","min","max"]),h("div",Mt,[h("span",null,[h("span",null,v(F(x).state.player.attr[p.attrName]-F(c)[p.attrName]),1),Ht,h("span",null,v(F(x).state.player.attr[p.attrName]),1)]),h("span",null,[Gt,h("span",{class:Q(F(c)[p.attrName]*p.cost>=0?"reduce":"add")},v(F(c)[p.attrName]*p.cost>=0?"":"+"),3),h("span",{class:Q(F(c)[p.attrName]*p.cost>=0?"reduce":"add")},v(-F(c)[p.attrName]*p.cost),3)])])]),_:2},1024))),256))]),_:1})])}}});var Tt=V(Ot,[["__scopeId","data-v-86fe8a28"]]);const qt=P({props:{createrItem:null},setup(t){const e=t,u=z(),s=l=>{const m=e.createrItem.values.filter(i=>l.includes(i.name));u.emit("change",m),u.emit("changeData",m)},_=q([]),c=l=>C.isEmpty(l.attrSet)&&C.isEmpty(l.attrAdd)&&C.isEmpty(l.attrReduce);return(l,m)=>{const i=M,f=H,a=U,E=ee,p=j,D=be,b=Ne;return o(),g("div",null,[r(f,null,{default:n(()=>[r(i,{span:24},{default:n(()=>[w(v(e.createrItem.groupName)+": ",1)]),_:1})]),_:1}),r(f,{class:"container"},{default:n(()=>[r(b,{class:"content",onChange:s,modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=d=>_.value=d)},{default:n(()=>[(o(!0),g(k,null,S(e.createrItem.values,d=>(o(),y(D,{class:"item",label:d.name},{default:n(()=>[r(p,{class:"descriptions",title:d.name,column:1},{default:n(()=>{var N;return[(d==null?void 0:d.cost)!=null?(o(),y(a,{key:0,label:`${d.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:n(()=>[h("span",{class:Q(d.cost>=0?"attrReduce":"attrAdd")},v(d.cost),3)]),_:2},1032,["label"])):R("",!0),(d==null?void 0:d.info)?(o(),y(a,{key:1,label:"\u4ECB\u7ECD:"},{default:n(()=>[w(v(d.info),1)]),_:2},1024)):R("",!0),c(d)?R("",!0):(o(),y(a,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:n(()=>[(o(!0),g(k,null,S(d.attrSet,(A,B)=>(o(),g("div",{class:"attrSet",key:B},v(B)+"\u8BBE\u4E3A"+v(A),1))),128)),(o(!0),g(k,null,S(d.attrAdd,(A,B)=>(o(),g("div",{class:"attrAdd",key:B},v(B)+"\u589E\u52A0"+v(A),1))),128)),(o(!0),g(k,null,S(d.attrReduce,(A,B)=>(o(),g("div",{class:"attrReduce",key:B},v(B)+"\u51CF\u5C11"+v(A),1))),128))]),_:2},1024)),((N=d==null?void 0:d.flagAdd)==null?void 0:N.length)?(o(),y(a,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:n(()=>[(o(!0),g(k,null,S(d.flagAdd,A=>(o(),y(E,{type:"info"},{default:n(()=>[w(v(A),1)]),_:2},1024))),256))]),_:2},1024)):R("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var Lt=V(qt,[["__scopeId","data-v-00462d1d"]]);const Wt={class:"sticky"},Ut=w("\u770B\u770B\u8FD9\u8F88\u5B50\u8FC7\u7684\u600E\u4E48\u6837"),jt=P({props:{creater:null,baseAttr:null},setup(t){const e=t,u=_e([]),s=q(e.baseAttr.cost),_=function(){let a=C.cloneDeep(e.baseAttr),E=C.assign({flags:[],attr:{}},a),p=a.cost;u.forEach(D=>{C.isArray(D)&&D.forEach(b=>{[E,p]=c(E,b,p)}),[E,p]=c(E,D,p)}),s.value=p,x.dispatch("setPlayerData",le({},E))},c=function(a,E,p){const{flagAdd:D,flagDelete:b,attrSet:d,attrAdd:N,attrReduce:A,cost:B}=E;C.isEmpty(b)||C.pull(a.flags,...b),C.isEmpty(D)||a.flags.push(...D);for(const I in d)if(Object.prototype.hasOwnProperty.call(d,I)){const G=d[I];a.attr[I]=G}for(const I in N)if(Object.prototype.hasOwnProperty.call(N,I)){const G=N[I];a.attr[I]=C.defaultTo(a.attr[I],0),a.attr[I]+=G}for(const I in A)if(Object.prototype.hasOwnProperty.call(A,I)){const G=A[I];a.attr[I]=C.defaultTo(a.attr[I],0),a.attr[I]-=G}return B&&(p-=B),[a,p]},l=(a,E)=>{u[a]=E,_()},m=()=>e.creater.every((a,E)=>{if(a.require){const p=u[E],D=!C.isEmpty(p);if(!D)throw a.groupName;return D}else return!0}),i=()=>{try{const a=m();s.value<0?de({title:"\u70B9\u6570\u4E0D\u591F\u7528\u554A",message:"\u5269\u4F59\u70B9\u6570\u4E0D\u591F\u7528\u554A",type:"error"}):s.value>0?$e.confirm("\u4F60\u70B9\u6570\u8FD8\u6709\u5269\u7684\u54E6,\u771F\u7684\u5C31\u8FD9\u6837\u4E48??","Warning",{confirmButtonText:"\u8001\u5B50\u4E50\u610F",cancelButtonText:"\u7B49\u6211\u82B1\u5149",type:"warning"}).then(()=>{ie({type:"success",message:"\u5927\u5144\u5F1F\u725B\u903C\u554A"}),f()}).catch(()=>{ie({type:"info",message:"\u597D\u561E,\u7B49\u4F60"})}):f()}catch(a){de({title:"\u5C11\u9009\u4E86\u4E1C\u897F\u554A",message:`${a},\u662F\u5FC5\u586B/\u5FC5\u9009\u9879`,type:"error"})}},f=()=>{x.dispatch("startGame"),$.push({name:"play"})};return(a,E)=>{const p=T,D=te,b=M,d=H;return o(),g(k,null,[h("div",Wt,[r(p,{type:"primary"},{default:n(()=>[w("\u5269\u4F59\u70B9\u6570:"+v(s.value),1)]),_:1})]),(o(!0),g(k,null,S(e.creater,(N,A)=>(o(),g("div",null,[N.type==="\u5355\u9009\u5668"?(o(),y(kt,{key:0,createrItem:N,onChangeData:B=>{l(A,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u591A\u9009\u5668"?(o(),y(Lt,{key:1,createrItem:N,onChangeData:B=>{l(A,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6587\u672C\u8F93\u5165"?(o(),y(St,{key:2,createrItem:N,onChangeData:B=>{l(A,B)}},null,8,["createrItem","onChangeData"])):R("",!0),N.type==="\u6570\u636E\u8C03\u6574"?(o(),y(Tt,{key:3,createrItem:N,onChangeData:B=>{l(A,B)}},null,8,["createrItem","onChangeData"])):R("",!0)]))),256)),h("div",null,[r(d,null,{default:n(()=>[r(b,{span:24,class:"btn"},{default:n(()=>[r(D,{class:"big",type:"primary",onClick:i},{default:n(()=>[Ut]),_:1})]),_:1})]),_:1})])],64)}}});var Qt=V(jt,[["__scopeId","data-v-e4e6d4b2"]]);const zt={class:"content"},Jt={class:"propertie"},Kt=P({setup(t){const e=O[x.state.scenario.scenarioName],u=(s,_)=>{var l,m;const c=(l=e==null?void 0:e.properties)==null?void 0:l[s];if(c){const i=c.filter(a=>C.inRange(_,...a.range)),f=C.random(0,i.length-1);return(m=i==null?void 0:i[f])==null?void 0:m.desc}};return(s,_)=>{const c=U,l=j,m=ee,i=ke,f=T;return o(),y(f,{class:"box-card"},{default:n(()=>[r(i,null,{default:n(()=>[h("div",zt,[r(l,{title:"\u89D2\u8272\u5C5E\u6027",column:1},{default:n(()=>[(o(!0),g(k,null,S(F(x).state.player.attr,(a,E)=>(o(),y(c,{key:E+a,label:E},{default:n(()=>[w(v(a),1),h("span",Jt,v(u(E,a)),1)]),_:2},1032,["label"]))),128))]),_:1}),(o(!0),g(k,null,S(F(x).state.player.flags,(a,E)=>(o(),y(m,{key:E,class:"flags"},{default:n(()=>[w(v(a),1)]),_:2},1024))),128))])]),_:1})]),_:1})}}});var pe=V(Kt,[["__scopeId","data-v-064ee701"]]);const Xt=t=>(L("data-v-03b1dc2c"),t=t(),W(),t),Yt=Xt(()=>h("h2",null,"\u521B\u5EFA\u89D2\u8272",-1)),Zt=P({setup(t){var _,c,l,m,i,f,a,E,p,D,b,d,N,A,B,I,G,ce;((l=(c=(_=$==null?void 0:$.currentRoute)==null?void 0:_.value)==null?void 0:c.params)==null?void 0:l.scenarioName)!==((i=(m=x==null?void 0:x.state)==null?void 0:m.scenario)==null?void 0:i.scenarioName)&&((E=(a=(f=$==null?void 0:$.currentRoute)==null?void 0:f.value)==null?void 0:a.params)==null?void 0:E.scenarioName)&&x.dispatch("changeScenario",(b=(D=(p=$==null?void 0:$.currentRoute)==null?void 0:p.value)==null?void 0:D.params)==null?void 0:b.scenarioName),!((A=(N=(d=$==null?void 0:$.currentRoute)==null?void 0:d.value)==null?void 0:N.params)==null?void 0:A.scenarioName)&&!((I=(B=x==null?void 0:x.state)==null?void 0:B.scenario)==null?void 0:I.scenarioName)&&$.push({name:"HelloWorld"});const e=O[(ce=(G=x.state)==null?void 0:G.scenario)==null?void 0:ce.scenarioName];e||$.push({name:"HelloWorld"});const{creater:u,baseAttr:s}=e;return(yu,Cu)=>{const fe=K,Ee=X,ve=Y,ge=Z;return o(),y(ge,{class:"page"},{default:n(()=>[r(fe,null,{default:n(()=>[r(ae)]),_:1}),r(Ee,null,{default:n(()=>[h("h1",null,v(F(O).name),1),Yt,r(Qt,{creater:F(u),baseAttr:F(s)},null,8,["creater","baseAttr"]),r(pe)]),_:1}),r(ve,null,{default:n(()=>[r(ne)]),_:1})]),_:1})}}});var eu=V(Zt,[["__scopeId","data-v-03b1dc2c"]]);const tu={class:"event"},uu={key:0,class:"eventRes"},au=P({setup(t){const e=u=>{const{choosen:s,options:_}=u,c=_.find(m=>m.label===s);return c==null?void 0:c.choosenText};return(u,s)=>{var m,i,f;const _=T,c=M,l=H;return o(!0),g(k,null,S((f=(i=(m=F(x))==null?void 0:m.state)==null?void 0:i.game)==null?void 0:f.historyActions,(a,E)=>(o(),y(l,{gutter:20},{default:n(()=>[r(c,{span:24},{default:n(()=>[r(_,{class:"box-card"},{default:n(()=>[h("div",tu,v(a.text),1),e(a)?(o(),g("div",uu,v(e(a)),1)):R("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)}}});var nu=V(au,[["__scopeId","data-v-19e6628f"]]);const su=P({async setup(t){let e,u,s=q({});const _=(l,m)=>{const i=C.cloneDeep(l);i.choosen=m,x.dispatch("newActionHistory",i),c()},c=async()=>{const l=await x.dispatch("getNewEvent");s.value=l};return[e,u]=Ie(()=>c()),await e,u(),(l,m)=>{const i=M,f=H,a=te,E=T;return o(),y(E,{class:"currentEvent"},{default:n(()=>{var p,D;return[r(f,{gutter:20},{default:n(()=>[r(i,{span:24},{default:n(()=>{var b;return[h("div",null,v((b=F(s))==null?void 0:b.text),1)]}),_:1})]),_:1}),((D=(p=F(s))==null?void 0:p.options)==null?void 0:D.length)?(o(),y(f,{key:0,gutter:20},{default:n(()=>[r(i,{span:24,class:"operation"},{default:n(()=>[(o(!0),g(k,null,S(F(s).options,b=>(o(),y(a,{onClick:d=>_(F(s),b.label),type:"primary"},{default:n(()=>[w(v(b.label),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1})):R("",!0)]}),_:1})}}});var cu=V(su,[["__scopeId","data-v-3a905a76"]]);const ou=t=>(L("data-v-39060b85"),t=t(),W(),t),ru=ou(()=>h("h1",{class:"gameEnd"},"\u6E38\u620F\u7ED3\u675F",-1)),lu={class:"title"},_u={class:"text"},du={class:"bnts"},iu=w("\u56DE\u5230\u9996\u9875"),mu=w("\u518D\u6765\u4E00\u628A"),pu=P({setup(t){const e=x.state.game.end,u=()=>{$.push({name:"HelloWorld"})},s=()=>{const _=$.push({name:"create",params:{scenarioName:_}})};return(_,c)=>{const l=M,m=H,i=T,f=te;return o(),g(k,null,[ru,r(i,{class:"currentEvent"},{default:n(()=>[r(m,{gutter:20},{default:n(()=>[r(l,{span:24},{default:n(()=>{var a;return[h("div",lu,v((a=F(e))==null?void 0:a.title),1)]}),_:1}),r(l,{span:24},{default:n(()=>{var a;return[h("div",_u,v((a=F(e))==null?void 0:a.text),1)]}),_:1})]),_:1})]),_:1}),r(m,{gutter:20},{default:n(()=>[r(l,{span:24},{default:n(()=>[h("div",du,[r(f,{type:"primary",plain:"",onClick:u},{default:n(()=>[iu]),_:1}),r(f,{type:"primary",plain:"",onClick:s},{default:n(()=>[mu]),_:1})])]),_:1})]),_:1})],64)}}});var fu=V(pu,[["__scopeId","data-v-39060b85"]]);const Eu={class:"content"},vu=P({setup(t){var s,_;window.scrollTo(0,0);const e=O[(_=(s=x.state)==null?void 0:s.scenario)==null?void 0:_.scenarioName],u=we(()=>{var c,l;return!C.isEmpty((l=(c=x.state)==null?void 0:c.game)==null?void 0:l.end)});return(c,l)=>{const m=K,i=Se,f=X,a=Y,E=Z;return o(),y(E,{class:"page"},{default:n(()=>[r(m,null,{default:n(()=>[r(ae)]),_:1}),r(f,null,{default:n(()=>{var p;return[h("div",Eu,[h("h1",null,"\u5267\u672C:"+v((p=F(e))==null?void 0:p.name),1),r(i,{target:".content"},{default:n(()=>[r(pe)]),_:1}),r(nu),F(u)?R("",!0):(o(),y(cu,{key:0})),F(u)?(o(),y(fu,{key:1})):R("",!0)])]}),_:1}),r(a,null,{default:n(()=>[r(ne)]),_:1})]),_:1})}}});var gu=V(vu,[["__scopeId","data-v-0d72e7de"]]);const hu=[{path:"/create/:scenarioName",component:eu,name:"create",props:!0},{path:"/play",component:gu,name:"play"},{path:"/",component:Nt,name:"HelloWorld"}],$=Re({history:Pe(),routes:hu});const Bu=P({setup(t){return(e,u)=>{const s=Ve("router-view");return o(),y(Me,null,{default:n(()=>[r(s)]),_:1})}}}),se=He(Bu);se.use(x);se.use($);$.isReady().then(()=>se.mount("#app"));
