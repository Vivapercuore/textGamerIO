var be=Object.defineProperty;var de=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var ie=(e,t,u)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,me=(e,t)=>{for(var u in t||(t={}))Ne.call(t,u)&&ie(e,u,t[u]);if(de)for(var u of de(t))we.call(t,u)&&ie(e,u,t[u]);return e};import{_ as y,c as ke,d as P,o as c,a as B,b as F,t as v,u as A,e as S,p as O,f as Q,r as q,E as ee,g as z,h as J,i as U,j as L,k as T,l as te,m as ue,n as ne,q as C,w as s,s as d,v as V,F as k,x as $,y as $e,z as Ie,A as K,B as ae,C as X,D as Se,G as pe,H as Re,I as Ve,J as Pe,K as se,L as re,M as fe,N as Ee,O as ve,P as He,Q as ge,R as Me,S as Ge,T as Be,U as Le,V as Te,W as qe,X as We,Y as Ue,Z as Oe}from"./vendor.8d53e782.js";const Qe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function u(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=u(r);fetch(r.href,n)}};Qe();const ze={cost:10,attr:{\u59D3\u540D:"",\u79CD\u65CF:"",\u5E74\u9F84:0,\u5E78\u8FD0:10,\u529B\u91CF:10,\u654F\u6377:10,\u7CBE\u795E:10,\u9B45\u529B:10,\u667A\u529B:10,\u8D22\u5BCC:10}},Je=[{range:[0,3],desc:"\u5F31\u4E0D\u7981\u98CE"},{range:[3,5],desc:"\u80FD\u548C\u516C\u9E21\u5927\u6218\u516B\u767E\u56DE\u5408"},{range:[5,8],desc:"\u624B\u6709\u6740\u9E21\u4E4B\u529B"},{range:[8,15],desc:"\u5288\u67F4\u6311\u6C34\u4E0D\u5728\u8BDD\u4E0B"},{range:[15,25],desc:"\u96BE\u5F97\u4E00\u89C1\u7684\u5927\u529B\u58EB"},{range:[20,45],desc:"\u8FD9\u80AF\u5B9A\u662F\u4E2A\u5927\u808C\u9738"},{range:[45,70],desc:"\u5965\u8FD0\u4F1A\u9009\u624B"},{range:[65,85],desc:"\u5DF2\u7ECF\u63A5\u8FD1\u4EBA\u7C7B\u7684\u6781\u9650\u4E86"},{range:[80,100],desc:"\u6C14\u62D4\u5C71\u516E\u529B\u76D6\u4E16"},{range:[100,999],desc:"\u771F\u7684\u8FD8\u7B97\u4EBA\u7C7B\u5417"}],Ke={\u5E74\u9F84:[{range:[0,3],desc:"\u5E7C\u513F"},{range:[3,8],desc:"\u5C11\u5E74"}],\u529B\u91CF:Je},Xe={require:!0,groupName:"\u59D3\u540D",type:"\u6587\u672C\u8F93\u5165",values:{name:"\u89D2\u8272\u59D3\u540D",info:"\u8D77\u4E2A\u540D\u5B57\u5427",attrName:"\u59D3\u540D"}},Ye={require:!0,groupName:"\u79CD\u65CF",type:"\u5355\u9009\u5668",values:[{name:"\u9F99",info:"\u957F\u7FC5\u8180\u7684\u5927\u8725\u8734",cost:8,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u9F99"},attrAdd:{\u529B\u91CF:10},attrReduce:{}},{name:"\u72D7\u5934\u4EBA",info:"\u636E\u8BF4\u6709\u5DE8\u9F99\u8840\u7EDF",cost:1,flagAdd:["\u9F99\u88D4"],flagDelete:[],attrSet:{\u79CD\u65CF:"\u72D7\u5934\u4EBA"},attrAdd:{\u7CBE\u795E:5},attrReduce:{\u9B45\u529B:3}},{name:"\u4EBA\u7C7B",info:"\u72E1\u8BC8\u7684\u5F02\u4E61\u4EBA",cost:1,flagAdd:[],flagDelete:[],attrSet:{\u79CD\u65CF:"\u4EBA\u7C7B"},attrAdd:{\u667A\u529B:1},attrReduce:{}}]},Ze={require:!0,groupName:"\u6027\u522B",type:"\u5355\u9009\u5668",values:[{name:"\u65E0\u6027",info:"\u6CA1\u6709\u90A3\u79CD\u4E16\u4FD7\u7684\u6B32\u671B",cost:1,flagAdd:["\u65E0\u6027"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:2},attrReduce:{}},{name:"\u7537",info:"\u7537\u5B69\u5B50\u4E00\u822C\u4F1A\u5F3A\u58EE\u4E00\u70B9\u5427",cost:1,flagAdd:["\u7537"],flagDelete:[],attrSet:{},attrAdd:{\u529B\u91CF:2},attrReduce:{}},{name:"\u5973",info:"\u8F6F\u8F6F\u9999\u9999\u7684\u5973\u5B69\u5B50",cost:1,flagAdd:["\u5973"],flagDelete:[],attrSet:{},attrAdd:{\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}}]},je={},et={groupName:"\u5C5E\u6027\u8C03\u6574",type:"\u6570\u636E\u8C03\u6574",values:[{min:0,max:999,attrName:"\u529B\u91CF",cost:1,maxModify:5},{min:0,max:999,attrName:"\u654F\u6377",cost:1,maxModify:5},{min:0,max:999,attrName:"\u667A\u529B",cost:1,maxModify:5},{min:0,max:999,attrName:"\u8D22\u5BCC",cost:1,maxModify:5},{min:0,max:999,attrName:"\u7CBE\u795E",cost:1,maxModify:5},{min:0,max:999,attrName:"\u9B45\u529B",cost:1,maxModify:5}]},tt={require:!1,groupName:"\u7279\u6027",type:"\u591A\u9009\u5668",values:[{name:"\u51FA\u8EAB\u8D35\u65CF",info:"\u81F3\u5C11\u4E0D\u662F\u8DEA\u65CF",cost:4,flagAdd:["\u8D35\u65CF"],flagDelete:[],attrSet:{},attrAdd:{\u8D22\u5BCC:5,\u9B45\u529B:3},attrReduce:{\u529B\u91CF:1}},{name:"\u6276\u5979",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u6276\u5979"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}},{name:"\u7537\u540C",info:"\u6D4B\u8BD5\u7279\u6027",cost:-1,flagAdd:["\u7537\u540C"],flagDelete:[],attrSet:{},attrAdd:{\u7CBE\u795E:10},attrReduce:{\u9B45\u529B:1}}]},ut=[Xe,Ye,Ze,je,tt,et],nt={eventPackName:"\u4EBA\u751F",events:[{name:"\u623F\u4EF7\u6DA8\u4E86",text:"\u5927\u8857\u5C0F\u5DF7\u90FD\u5728\u6D41\u4F20,\u4ECA\u5E74\u7684\u623F\u4EF7\u53C8\u6DA8\u4E86",options:[{label:"\u6DA8\u4E0D\u6DA8\u54B1\u90FD\u4E70\u4E0D\u8D77\u554A",choosenText:"\u771F\u662F\u64CD\u86CB",goto:[]},{label:"\u5173\u6211\u5C41\u4E8B",goto:[]},{label:"\u8D76\u7D27\u4E0A\u8F66",goto:[]}]}]};var H;(function(e){e.\u52A0="\u52A0",e.\u51CF="\u51CF",e.\u4E58="\u4E58",e.\u9664="\u9664",e.\u5927\u4E8E="\u5927\u4E8E",e.\u5C0F\u4E8E="\u5C0F\u4E8E",e.\u7B49\u4E8E="\u7B49\u4E8E",e.\u4E14="\u4E14",e.\u6216="\u6216",e.\u975E="\u975E",e.\u5168\u90E8="\u5168\u90E8",e.\u4EFB\u610F="\u4EFB\u610F"})(H||(H={}));const at={eventPackName:"\u4EBA\u751F",events:[{name:"\u5E73\u5E73\u65E0\u5947\u7684\u751F\u6D3B",text:"\u5E73\u5B89\u65E0\u4E8B\u7684\u5EA6\u8FC7\u4E86\u4E00\u5E74",options:[{label:"\u65B0\u5E74\u5FEB\u4E50",goto:[]}]},{name:"\u7259\u7259\u5B66\u8BED",text:"\u7259\u7259\u5B66\u8BED",showif:{operator:H.\u7B49\u4E8E,A:1,B:2},options:[{label:"\u65B0\u5E74\u5FEB\u4E50",goto:[]}]}]},st=[{name:"default",text:"\u51C6\u5907\u597D\u51FA\u751F\u4E86\u4E48",options:[{label:"\u5F00\u59CB\u8F6C\u751F",choosenText:"\u4F60\u51FA\u751F\u4E86",goto:[]},{label:"\u6211\u540E\u6094\u4E86",choosenText:"\u80CE\u6B7B\u8179\u4E2D",goto:["\u80CE\u6B7B\u8179\u4E2D"]}]},nt,at],rt=[{name:"default",title:"\u5C31\u505A\u4E86\u8FD9\u4E48\u70B9\u513F",text:"\u6CA1\u4E86,\u4F5C\u8005\u592A\u61D2\u4E86,\u6CA1\u66F4\u65B0,\u770B\u5230\u8FD9\u4E2A\u7684\u8BDD\u8BF7\u53BB\u50AC\u4F5C\u8005\u66F4\u65B0"},{name:"\u80CE\u6B7B\u8179\u4E2D",title:"\u80CE\u6B7B\u8179\u4E2D",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0(\u4F5C\u8005\u8FD8\u6CA1\u505A\u597D\u8FD9\u4E2A\u663E\u793A)}}\u9884\u89C1\u5230\u4E86\u4ED6\u60B2\u60E8\u7684\u4E00\u751F,\u751A\u81F3\u4E0D\u613F\u610F\u964D\u4E34\u5230\u8FD9\u4E16\u4E0A"},{name:"\u96BE\u4EA7",title:"\u96BE\u4EA7\u800C\u6B7B",text:"\u53EF\u60B2\u7684{{\u73A9\u5BB6\u540D\u79F0(\u4F5C\u8005\u8FD8\u6CA1\u505A\u597D\u8FD9\u4E2A\u663E\u793A)}},\u4ED6\u7684\u6BCD\u4EB2\u96BE\u4EA7\u4E86,\u63D0\u524D\u7ED3\u675F\u4E86\u4E00\u751F,\u987A\u4FBF\u5BB3\u6B7B\u4E86\u4ED6\u7684\u6BCD\u4EB2"}],ct={name:"\u5F02\u754C\u8F6C\u751F",info:"\u56E0\u4E3A\u521A\u5F00\u59CB\u505A,\u6240\u4EE5,\u4F60\u80AF\u5B9A\u53EA\u80FD\u80CE\u6B7B\u8179\u4E2D\u7684,\u522B\u6323\u624E\u4E86,\u4F5C\u8005\u538B\u6839\u6CA1\u505A\u5176\u4ED6\u7ED3\u5C40",baseAttr:ze,creater:ut,properties:Ke,events:st,ends:rt};var W={reincarnation:ct};const ot={state:()=>({scenarioName:""}),mutations:{changeScenario(e,t){e.scenarioName=t}},actions:{changeScenario({commit:e,dispatch:t},u){if(!u)return;e("changeScenario",u);const o=W[u];t("setPlayerData",o.baseAttr)}}},lt={state:()=>({flags:[],attr:{}}),mutations:{setPlayerData(e,t){y.assign(e,t)}},actions:{setPlayerData({commit:e,dispatch:t},u){e("setPlayerData",u)}},modules:{}},_t=function(e){switch(e.operator){case H.\u52A0:return dt(e.A,e.B);case H.\u51CF:return it(e.A,e.B);case H.\u4E58:return mt(e.A,e.B);case H.\u9664:return pt(e.A,e.B);case H.\u5927\u4E8E:return ft(e.A,e.B);case H.\u5C0F\u4E8E:return Et(e.A,e.B);case H.\u7B49\u4E8E:return vt(e.A,e.B);case H.\u4E14:return gt(e.A,e.B);case H.\u6216:return Bt(e.A,e.B);case H.\u975E:return ce(e.A,e.B);case H.\u5168\u90E8:return ce(e.A,e.B);case H.\u4EFB\u610F:return ce(e.A,e.B);default:return console.error("unknown Operator"),!0}};function dt(e,t){return e=Number(e),t=Number(t),e+t}function it(e,t){return e=Number(e),t=Number(t),e-t}function mt(e,t){return e=Number(e),t=Number(t),e*t}function pt(e,t){return e=Number(e),t=Number(t),e/t}function ft(e,t){return e=Number(e),t=Number(t),e>t}function Et(e,t){return e=Number(e),t=Number(t),e<t}function vt(e,t){return e===t}function gt(e,t){return e&&t}function Bt(e,t){return e||t}function ce(e){return!e}const ht=function(e){return _t(e)};function yt(e,t){let u=he(e);if(y.remove(u,function(o){return y.find(t,{name:o.name})}),u=y.filter(u,o=>y.isEmpty(o.showif)?!0:ht(o.showif)),t.length===0){const o=u.find(r=>r.name==="default");if(o)return o}if((u==null?void 0:u.length)>0){const o=y.random(0,u.length-1);return u[o]}return{}}function Ft(e,t){let u=he(e);if(console.log(t),t){const o=u.find(r=>r.name===t);if(o)return o}return{}}function he(e){const t=[];return e.forEach(u=>{u.name&&t.push(u),u.eventPackName&&u.events&&t.push(...u.events)}),t}function Ct(e,t){if(t){const u=e.find(o=>o.name===t);if(u)return u}return{}}function At(e,t,u){const o=[];o.push(...e);const r=o.find(n=>n.name==="default");return r||{}}const Dt={getNewEvent:yt,findEvent:Ft,findEnd:Ct,getEnd:At},Y={event:Dt},xt={state:()=>({end:{},historyActions:[]}),mutations:{newActionHistory(e,t){e.historyActions.push(t)},startGame(e){e.end={},e.historyActions=[]},endGame(e,t){e.end=t}},actions:{newActionHistory({commit:e,dispatch:t},u){e("newActionHistory",u)},startGame({commit:e}){e("startGame")},endGame({commit:e,dispatch:t,rootState:u},o){e("endGame",o)},eventChain({commit:e,dispatch:t,rootState:u}){return new Promise(async(o,r)=>{var m;let n;const l=y.last(u.game.historyActions);if(l){const{choosen:p,options:E}=l,f=E.find(a=>a.label===p);if(((m=f==null?void 0:f.goto)==null?void 0:m.length)>0){const a=y.random(0,f.goto.length-1);n=f.goto[a]}}if(n){const p=u.scenario.scenarioName,E=W[p],f=Y.event.findEnd(E.ends,n);if(!y.isEmpty(f))t("endGame",f),o(f);else{const a=Y.event.findEvent(E.events,n);o(a)}}else o()})},getNewEvent({commit:e,dispatch:t,rootState:u}){return new Promise(async(o,r)=>{const n=u.scenario.scenarioName,l=u.game.historyActions;if(!n){r("no scenario");return}const m=W[n],p=await t("eventChain");if(!y.isEmpty(p))o(p);else{const E=Y.event.getNewEvent(m.events,l);if(!y.isEmpty(E))o(E);else{const{attr:f,flags:a}=u.player,_=Y.event.getEnd(m.ends,f,a);t("endGame",_),o(_)}}})}},modules:{}},bt="text-gamer",Nt="0.1.6",wt={dev:"vite",build:"vue-tsc --noEmit && vite build",serve:"vite preview"},kt={"@typescript-eslint/eslint-plugin":"^5.5.0","@typescript-eslint/parser":"^5.5.0","element-plus":"^1.2.0-beta.5",eslint:"^8.4.0",less:"^4.1.2",loadsh:"^0.0.4",sass:"^1.44.0",vue:"^3.2.23","vue-router":"4",vuex:"^4.0.2"},$t={"@vitejs/plugin-vue":"^1.9.3",typescript:"^4.4.3","unplugin-auto-import":"^0.5.1","unplugin-vue-components":"^0.17.2",vite:"^2.6.4","vue-tsc":"^0.3.0"};var It={name:bt,version:Nt,scripts:wt,dependencies:kt,devDependencies:$t};const x=ke({state:{version:It.version},mutations:{setSelectAddress(e,t){e.selectAddress=t}},actions:{},modules:{scenario:ot,player:lt,game:xt}});var M=(e,t)=>{const u=e.__vccOpts||e;for(const[o,r]of t)u[o]=r;return u};const St={class:"header"},Rt=S(" \u597D\u65E5\u5B50\u90FD\u5728\u4E0B\u8F88\u5B50 "),Vt={class:"version"},Pt=P({setup(e){return(t,u)=>(c(),B("div",St,[Rt,F("span",Vt,"v"+v(A(x).state.version),1)]))}});var oe=M(Pt,[["__scopeId","data-v-5895b07c"]]);const Z=e=>(O("data-v-4ac8511c"),e=e(),Q(),e),Ht={class:"foot"},Mt=Z(()=>F("a",{class:"link",href:"https://github.com/Vivapercuore/textGamer"},"github",-1)),Gt=Z(()=>F("span",{class:"author"},"\u4F5C\u8005:vivapercuore",-1)),Lt=Z(()=>F("span",{class:"qq"},"QQ:986887506",-1)),Tt=Z(()=>F("a",{class:"link",href:"https://github.com/Vivapercuore/textGamerIO/blob/main/README.md"}," \u8BF4\u660E ",-1)),qt=[Mt,Gt,Lt,Tt],Wt=P({setup(e){return(t,u)=>(c(),B("div",Ht,qt))}});var le=M(Wt,[["__scopeId","data-v-4ac8511c"]]);const Ut=e=>(O("data-v-5caa8e4b"),e=e(),Q(),e),Ot=Ut(()=>F("h1",null,"\u9009\u62E9\u4F60\u8981\u6E38\u73A9\u7684\u5267\u672C:",-1)),Qt=P({setup(e){const t=q(W),u=o=>{x.dispatch("changeScenario",o),w.push({name:"create",params:{scenarioName:o}})};return(o,r)=>{const n=ee,l=z,m=J,p=U,E=L,f=T,a=te,_=ue,D=ne;return c(),C(D,{class:"page hw"},{default:s(()=>[d(n,null,{default:s(()=>[d(oe)]),_:1}),d(a,null,{default:s(()=>[Ot,A(t)?(c(),C(f,{key:0,gutter:20},{default:s(()=>[(c(!0),B(k,null,V(A(t),(b,i)=>(c(),C(E,{xs:24,sm:12,md:8,lg:6,xl:4},{default:s(()=>[d(p,{class:"scenarioItem",onClick:R=>u(i)},{default:s(()=>[d(m,{title:b.name},{default:s(()=>[d(l,{label:"\u63CF\u8FF0\uFF1A"},{default:s(()=>[S(v(b.info),1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"])]),_:2},1024))),256))]),_:1})):$("",!0)]),_:1}),d(_,null,{default:s(()=>[d(le)]),_:1})]),_:1})}}});var zt=M(Qt,[["__scopeId","data-v-5caa8e4b"]]);const Jt=P({props:{createrItem:null},setup(e){const t=e,u=X(),o=l=>{const m=t.createrItem.values.find(p=>p.name===l);u.emit("change",m),u.emit("changeData",m)},r=q(),n=l=>y.isEmpty(l.attrSet)&&y.isEmpty(l.attrAdd)&&y.isEmpty(l.attrReduce);return(l,m)=>{const p=L,E=T,f=z,a=ae,_=J,D=$e,b=Ie;return c(),B("div",null,[d(E,null,{default:s(()=>[d(p,{span:24},{default:s(()=>[S(v(t.createrItem.groupName)+": ",1)]),_:1})]),_:1}),d(E,{class:"container"},{default:s(()=>[d(b,{class:"content",border:"",onChange:o,modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=i=>r.value=i)},{default:s(()=>[(c(!0),B(k,null,V(t.createrItem.values,i=>(c(),C(D,{class:"item",label:i.name},{default:s(()=>[d(_,{class:"descriptions",title:i.name,column:1},{default:s(()=>{var R;return[(i==null?void 0:i.cost)!=null?(c(),C(f,{key:0,label:`${i.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:s(()=>[F("span",{class:K(i.cost>=0?"attrReduce":"attrAdd")},v(i.cost),3)]),_:2},1032,["label"])):$("",!0),(i==null?void 0:i.info)?(c(),C(f,{key:1,label:"\u4ECB\u7ECD:"},{default:s(()=>[S(v(i.info),1)]),_:2},1024)):$("",!0),n(i)?$("",!0):(c(),C(f,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:s(()=>[(c(!0),B(k,null,V(i.attrSet,(h,g)=>(c(),B("div",{class:"attrSet",key:g},v(g)+"\u8BBE\u4E3A"+v(h),1))),128)),(c(!0),B(k,null,V(i.attrAdd,(h,g)=>(c(),B("div",{class:"attrAdd",key:g},v(g)+"\u589E\u52A0"+v(h),1))),128)),(c(!0),B(k,null,V(i.attrReduce,(h,g)=>(c(),B("div",{class:"attrReduce",key:g},v(g)+"\u51CF\u5C11"+v(h),1))),128))]),_:2},1024)),((R=i==null?void 0:i.flagAdd)==null?void 0:R.length)?(c(),C(f,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:s(()=>[(c(!0),B(k,null,V(i.flagAdd,h=>(c(),C(a,{type:"info"},{default:s(()=>[S(v(h),1)]),_:2},1024))),256))]),_:2},1024)):$("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var Kt=M(Jt,[["__scopeId","data-v-3a01fed0"]]);const Xt={class:"container"},Yt=P({props:{createrItem:null},setup(e){const t=e,u=X(),o=n=>{if(!n)return;const l={attrSet:{[t.createrItem.values.attrName]:n}};u.emit("changeData",l)},r=q();return(n,l)=>{const m=L,p=T,E=Se;return c(),B("div",Xt,[d(p,null,{default:s(()=>[d(m,{span:24},{default:s(()=>[S(v(t.createrItem.groupName)+": ",1)]),_:1})]),_:1}),d(p,{class:"container"},{default:s(()=>[d(E,{class:"content",onInput:o,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),placeholder:t.createrItem.values.info},null,8,["modelValue","placeholder"])]),_:1})])}}});var Zt=M(Yt,[["__scopeId","data-v-dcda753e"]]);const ye=e=>(O("data-v-86fe8a28"),e=e(),Q(),e),jt={class:"container"},eu={class:"info"},tu={class:"decs"},uu={class:"res"},nu=ye(()=>F("span",null," -> ",-1)),au=ye(()=>F("span",null,"\u70B9\u6570:",-1)),su=P({props:{createrItem:null},setup(e){const t=e,u=X(),o=l=>{const m={attrAdd:{},attrReduce:{},cost:0};for(const p in n)if(Object.prototype.hasOwnProperty.call(n,p)){const E=n[p];if(E>0){m.attrAdd[p]=Math.abs(E);const f=t.createrItem.values.find(a=>a.attrName===p);m.cost+=E*f.cost}if(E<0){m.attrReduce[p]=Math.abs(E);const f=t.createrItem.values.find(a=>a.attrName===p);m.cost+=E*f.cost}}u.emit("changeData",m)},r=y.cloneDeep(x.state.player.attr),n=pe(y.mapValues(r,()=>0));return(l,m)=>{const p=L,E=T,f=Re,a=U;return c(),B("div",jt,[d(E,null,{default:s(()=>[d(p,{span:24},{default:s(()=>[S(v(t.createrItem.groupName)+": ",1)]),_:1})]),_:1}),d(E,{class:"content"},{default:s(()=>[(c(!0),B(k,null,V(t.createrItem.values,_=>(c(),C(a,{class:"content-card"},{default:s(()=>[F("div",eu,[S(v(_.attrName)+": ",1),F("span",tu,"\u6BCF\u70B9\u8C03\u6574\u6D88\u8017/\u589E\u52A0 "+v(_.cost)+"\u70B9 \u70B9\u6570:",1)]),d(f,{modelValue:A(n)[_.attrName],"onUpdate:modelValue":D=>A(n)[_.attrName]=D,min:-_.maxModify,max:_.maxModify,onChange:o},null,8,["modelValue","onUpdate:modelValue","min","max"]),F("div",uu,[F("span",null,[F("span",null,v(A(x).state.player.attr[_.attrName]-A(n)[_.attrName]),1),nu,F("span",null,v(A(x).state.player.attr[_.attrName]),1)]),F("span",null,[au,F("span",{class:K(A(n)[_.attrName]*_.cost>=0?"reduce":"add")},v(A(n)[_.attrName]*_.cost>=0?"":"+"),3),F("span",{class:K(A(n)[_.attrName]*_.cost>=0?"reduce":"add")},v(-A(n)[_.attrName]*_.cost),3)])])]),_:2},1024))),256))]),_:1})])}}});var ru=M(su,[["__scopeId","data-v-86fe8a28"]]);const cu=P({props:{createrItem:null},setup(e){const t=e,u=X(),o=l=>{const m=t.createrItem.values.filter(p=>l.includes(p.name));u.emit("change",m),u.emit("changeData",m)},r=q([]),n=l=>y.isEmpty(l.attrSet)&&y.isEmpty(l.attrAdd)&&y.isEmpty(l.attrReduce);return(l,m)=>{const p=L,E=T,f=z,a=ae,_=J,D=Ve,b=Pe;return c(),B("div",null,[d(E,null,{default:s(()=>[d(p,{span:24},{default:s(()=>[S(v(t.createrItem.groupName)+": ",1)]),_:1})]),_:1}),d(E,{class:"container"},{default:s(()=>[d(b,{class:"content",onChange:o,modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=i=>r.value=i)},{default:s(()=>[(c(!0),B(k,null,V(t.createrItem.values,i=>(c(),C(D,{class:"item",label:i.name},{default:s(()=>[d(_,{class:"descriptions",title:i.name,column:1},{default:s(()=>{var R;return[(i==null?void 0:i.cost)!=null?(c(),C(f,{key:0,label:`${i.cost>=0?"\u82B1\u8D39":"\u589E\u52A0"}\u70B9\u6570:`},{default:s(()=>[F("span",{class:K(i.cost>=0?"attrReduce":"attrAdd")},v(i.cost),3)]),_:2},1032,["label"])):$("",!0),(i==null?void 0:i.info)?(c(),C(f,{key:1,label:"\u4ECB\u7ECD:"},{default:s(()=>[S(v(i.info),1)]),_:2},1024)):$("",!0),n(i)?$("",!0):(c(),C(f,{key:2,label:"\u5C5E\u6027\u8C03\u6574:"},{default:s(()=>[(c(!0),B(k,null,V(i.attrSet,(h,g)=>(c(),B("div",{class:"attrSet",key:g},v(g)+"\u8BBE\u4E3A"+v(h),1))),128)),(c(!0),B(k,null,V(i.attrAdd,(h,g)=>(c(),B("div",{class:"attrAdd",key:g},v(g)+"\u589E\u52A0"+v(h),1))),128)),(c(!0),B(k,null,V(i.attrReduce,(h,g)=>(c(),B("div",{class:"attrReduce",key:g},v(g)+"\u51CF\u5C11"+v(h),1))),128))]),_:2},1024)),((R=i==null?void 0:i.flagAdd)==null?void 0:R.length)?(c(),C(f,{key:3,label:"\u589E\u52A0\u6807\u7B7E:"},{default:s(()=>[(c(!0),B(k,null,V(i.flagAdd,h=>(c(),C(a,{type:"info"},{default:s(()=>[S(v(h),1)]),_:2},1024))),256))]),_:2},1024)):$("",!0)]}),_:2},1032,["title"])]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])}}});var ou=M(cu,[["__scopeId","data-v-00462d1d"]]);const lu=e=>(O("data-v-299714f9"),e=e(),Q(),e),_u={class:"sticky"},du=lu(()=>F("h2",null,"\u521B\u5EFA\u89D2\u8272",-1)),iu=P({props:{creater:null,baseAttr:null,startBtnLable:null},setup(e){const t=e,u=pe([]),o=se(()=>{var a;return((a=t==null?void 0:t.creater)==null?void 0:a.length)>0}),r=q(t.baseAttr.cost),n=function(){let a=y.cloneDeep(t.baseAttr),_=y.assign({flags:[],attr:{}},a),D=a.cost;u.forEach(b=>{y.isArray(b)&&b.forEach(i=>{[_,D]=l(_,i,D)}),[_,D]=l(_,b,D)}),r.value=D,x.dispatch("setPlayerData",me({},_))},l=function(a,_,D){const{flagAdd:b,flagDelete:i,attrSet:R,attrAdd:h,attrReduce:g,cost:I}=_;y.isEmpty(i)||y.pull(a.flags,...i),y.isEmpty(b)||a.flags.push(...b);for(const N in R)if(Object.prototype.hasOwnProperty.call(R,N)){const G=R[N];a.attr[N]=G}for(const N in h)if(Object.prototype.hasOwnProperty.call(h,N)){const G=h[N];a.attr[N]=y.defaultTo(a.attr[N],0),a.attr[N]+=G}for(const N in g)if(Object.prototype.hasOwnProperty.call(g,N)){const G=g[N];a.attr[N]=y.defaultTo(a.attr[N],0),a.attr[N]-=G}return I&&(D-=I),[a,D]},m=(a,_)=>{u[a]=_,n()},p=()=>t.creater.every((a,_)=>{if(a.require){const D=u[_],b=!y.isEmpty(D);if(!b)throw a.groupName;return b}else return!0}),E=()=>{try{const a=p();r.value<0?ve({title:"\u70B9\u6570\u4E0D\u591F\u7528\u554A",message:"\u5269\u4F59\u70B9\u6570\u4E0D\u591F\u7528\u554A",type:"error"}):r.value>0?He.confirm("\u4F60\u70B9\u6570\u8FD8\u6709\u5269\u7684\u54E6,\u771F\u7684\u5C31\u8FD9\u6837\u4E48??","Warning",{confirmButtonText:"\u8001\u5B50\u4E50\u610F",cancelButtonText:"\u7B49\u6211\u82B1\u5149",type:"warning"}).then(()=>{ge({type:"success",message:"\u5927\u5144\u5F1F\u725B\u903C\u554A"}),f()}).catch(()=>{ge({type:"info",message:"\u597D\u561E,\u7B49\u4F60"})}):f()}catch(a){ve({title:"\u5C11\u9009\u4E86\u4E1C\u897F\u554A",message:`${a},\u662F\u5FC5\u586B/\u5FC5\u9009\u9879`,type:"error"})}},f=()=>{x.dispatch("startGame"),w.push({name:"play"})};return(a,_)=>{const D=U,b=re,i=L,R=T;return c(),B(k,null,[A(o)?(c(),B(k,{key:0},[F("div",_u,[fe(d(D,{type:"primary"},{default:s(()=>[S("\u5269\u4F59\u70B9\u6570:"+v(r.value),1)]),_:1},512),[[Ee,r.value]])]),du,(c(!0),B(k,null,V(t.creater,(h,g)=>(c(),B("div",null,[h.type==="\u5355\u9009\u5668"?(c(),C(Kt,{key:0,createrItem:h,onChangeData:I=>{m(g,I)}},null,8,["createrItem","onChangeData"])):$("",!0),h.type==="\u591A\u9009\u5668"?(c(),C(ou,{key:1,createrItem:h,onChangeData:I=>{m(g,I)}},null,8,["createrItem","onChangeData"])):$("",!0),h.type==="\u6587\u672C\u8F93\u5165"?(c(),C(Zt,{key:2,createrItem:h,onChangeData:I=>{m(g,I)}},null,8,["createrItem","onChangeData"])):$("",!0),h.type==="\u6570\u636E\u8C03\u6574"?(c(),C(ru,{key:3,createrItem:h,onChangeData:I=>{m(g,I)}},null,8,["createrItem","onChangeData"])):$("",!0)]))),256))],64)):$("",!0),F("div",null,[d(R,null,{default:s(()=>[d(i,{span:24,class:"btn"},{default:s(()=>[d(b,{class:"big",type:"primary",onClick:E},{default:s(()=>[S(v(t.startBtnLable||"\u770B\u770B\u8FD9\u8F88\u5B50\u8FC7\u7684\u600E\u4E48\u6837"),1)]),_:1})]),_:1})]),_:1})])],64)}}});var mu=M(iu,[["__scopeId","data-v-299714f9"]]);const pu={class:"content"},fu={class:"propertie"},Eu=P({setup(e){const t=W[x.state.scenario.scenarioName],u=(r,n)=>{var m,p;const l=(m=t==null?void 0:t.properties)==null?void 0:m[r];if(l){const E=l.filter(a=>y.inRange(n,...a.range)),f=y.random(0,E.length-1);return(p=E==null?void 0:E[f])==null?void 0:p.desc}},o=se(()=>{var l,m,p;const r=((m=(l=x.state.player)==null?void 0:l.flags)==null?void 0:m.length)>0,n=!y.isEmpty((p=x.state.player)==null?void 0:p.attr);return r&&n});return(r,n)=>{const l=z,m=J,p=ae,E=Me,f=U;return fe((c(),C(f,{class:"box-card"},{default:s(()=>[d(E,null,{default:s(()=>[F("div",pu,[d(m,{title:"\u89D2\u8272\u5C5E\u6027",column:1},{default:s(()=>[(c(!0),B(k,null,V(A(x).state.player.attr,(a,_)=>(c(),C(l,{key:_+a,label:_},{default:s(()=>[S(v(a)+" ",1),F("span",fu,v(u(_,a)),1)]),_:2},1032,["label"]))),128))]),_:1}),(c(!0),B(k,null,V(A(x).state.player.flags,(a,_)=>(c(),C(p,{key:_,class:"flags"},{default:s(()=>[S(v(a),1)]),_:2},1024))),128))])]),_:1})]),_:1},512)),[[Ee,A(o)]])}}});var Fe=M(Eu,[["__scopeId","data-v-ceeaff04"]]);const vu={class:"title"},gu=P({setup(e){var n,l,m,p,E,f,a,_,D,b,i,R,h,g,I,N,G,j;((m=(l=(n=w==null?void 0:w.currentRoute)==null?void 0:n.value)==null?void 0:l.params)==null?void 0:m.scenarioName)!==((E=(p=x==null?void 0:x.state)==null?void 0:p.scenario)==null?void 0:E.scenarioName)&&((_=(a=(f=w==null?void 0:w.currentRoute)==null?void 0:f.value)==null?void 0:a.params)==null?void 0:_.scenarioName)&&x.dispatch("changeScenario",(i=(b=(D=w==null?void 0:w.currentRoute)==null?void 0:D.value)==null?void 0:b.params)==null?void 0:i.scenarioName),!((g=(h=(R=w==null?void 0:w.currentRoute)==null?void 0:R.value)==null?void 0:h.params)==null?void 0:g.scenarioName)&&!((N=(I=x==null?void 0:x.state)==null?void 0:I.scenario)==null?void 0:N.scenarioName)&&w.push({name:"HelloWorld"});const t=W[(j=(G=x.state)==null?void 0:G.scenario)==null?void 0:j.scenarioName];t||w.push({name:"HelloWorld"});const{creater:u,baseAttr:o,startBtnLable:r}=t;return(Gu,Lu)=>{const Ce=ee,Ae=te,De=ue,xe=ne;return c(),C(xe,{class:"page"},{default:s(()=>[d(Ce,null,{default:s(()=>[d(oe)]),_:1}),d(Ae,null,{default:s(()=>[F("h1",vu,v(A(t).name),1),d(mu,{creater:A(u),baseAttr:A(o),startBtnLable:A(r)},null,8,["creater","baseAttr","startBtnLable"]),d(Fe)]),_:1}),d(De,null,{default:s(()=>[d(le)]),_:1})]),_:1})}}});var Bu=M(gu,[["__scopeId","data-v-7d31cba6"]]);const hu={class:"event"},yu={key:0,class:"eventRes"},Fu={key:1,class:"eventRes"},Cu=P({setup(e){const t=o=>{const{choosen:r,options:n}=o,l=n.find(p=>p.label===r);return l==null?void 0:l.choosenText},u=o=>{const{choosen:r,options:n}=o,l=n.find(p=>p.label===r);return l==null?void 0:l.label};return(o,r)=>{var p,E,f;const n=U,l=L,m=T;return c(!0),B(k,null,V((f=(E=(p=A(x))==null?void 0:p.state)==null?void 0:E.game)==null?void 0:f.historyActions,(a,_)=>(c(),C(m,{gutter:20},{default:s(()=>[d(l,{span:24},{default:s(()=>[d(n,{class:"box-card"},{default:s(()=>[F("div",hu,v(a.text),1),u(a)?(c(),B("div",yu,v(u(a)),1)):$("",!0),t(a)?(c(),B("div",Fu,v(t(a)),1)):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)}}});var Au=M(Cu,[["__scopeId","data-v-380d2d01"]]);const Du=P({props:{msg:null},async setup(e){var f,a;let t,u;const o=W[(a=(f=x.state)==null?void 0:f.scenario)==null?void 0:a.scenarioName];let r=q({}),n=q(null);const l=(_,D)=>{const b=y.cloneDeep(_);b.choosen=D,x.dispatch("newActionHistory",b),m()},m=async()=>{const _=await x.dispatch("getNewEvent");r.value=_,E()};let p=null;const E=()=>{window.cancelAnimationFrame(p),p=window.requestAnimationFrame(()=>{var _,D;(D=(_=n==null?void 0:n.value)==null?void 0:_.scrollIntoView)==null||D.call(_,{behavior:"smooth",block:"start",inline:"center"})})};return o&&([t,u]=Ge(()=>m()),await t,u()),(_,D)=>{const b=L,i=T,R=re,h=U;return c(),B("div",{ref:(g,I)=>{I.viewdom=g,Be(n)?n.value=g:n=g},class:"view"},[d(h,{class:"currentEvent"},{default:s(()=>{var g,I;return[d(i,{gutter:20},{default:s(()=>[d(b,{span:24},{default:s(()=>{var N;return[F("div",null,v((N=A(r))==null?void 0:N.text),1)]}),_:1})]),_:1}),((I=(g=A(r))==null?void 0:g.options)==null?void 0:I.length)?(c(),C(i,{key:0,gutter:20},{default:s(()=>[d(b,{span:24,class:"operation"},{default:s(()=>{var N;return[(c(!0),B(k,null,V((N=A(r))==null?void 0:N.options,G=>(c(),C(R,{class:"optionsBtn",onClick:j=>l(A(r),G.label),type:"primary"},{default:s(()=>[S(v(G.label),1)]),_:2},1032,["onClick"]))),256))]}),_:1})]),_:1})):$("",!0)]}),_:1})],512)}}});var xu=M(Du,[["__scopeId","data-v-458dfd7a"]]);const bu={class:"title"},Nu={class:"text"},wu={class:"bnts"},ku=S("\u56DE\u5230\u9996\u9875"),$u=S("\u518D\u6765\u4E00\u628A"),Iu=P({setup(e){const t=x.state.game.end;let u=q(null);const o=()=>{w.push({name:"HelloWorld"})},r=()=>{const n=w.push({name:"create",params:{scenarioName:n}})};return console.log("end"),setTimeout(()=>{var n,l;(l=(n=u==null?void 0:u.value)==null?void 0:n.scrollIntoView)==null||l.call(n,{behavior:"smooth",block:"start",inline:"center"})},500),(n,l)=>{const m=L,p=T,E=U,f=re;return c(),B(k,null,[F("h1",{class:"gameEnd",ref:(a,_)=>{_.viewdom=a,Be(u)?u.value=a:u=a}},"\u6E38\u620F\u7ED3\u675F",512),d(E,{class:"currentEvent"},{default:s(()=>[d(p,{gutter:20},{default:s(()=>[d(m,{span:24},{default:s(()=>{var a;return[F("div",bu,v((a=A(t))==null?void 0:a.title),1)]}),_:1}),d(m,{span:24},{default:s(()=>{var a;return[F("div",Nu,v((a=A(t))==null?void 0:a.text),1)]}),_:1})]),_:1})]),_:1}),d(p,{gutter:20},{default:s(()=>[d(m,{span:24},{default:s(()=>[F("div",wu,[d(f,{type:"primary",plain:"",onClick:o},{default:s(()=>[ku]),_:1}),d(f,{type:"primary",plain:"",onClick:r},{default:s(()=>[$u]),_:1})])]),_:1})]),_:1})],64)}}});var Su=M(Iu,[["__scopeId","data-v-32973f9f"]]);const Ru={class:"content"},Vu=P({setup(e){var o,r;window.scrollTo(0,0);const t=W[(r=(o=x.state)==null?void 0:o.scenario)==null?void 0:r.scenarioName];t||w.push({name:"HelloWorld"});const u=se(()=>{var n,l;return!y.isEmpty((l=(n=x.state)==null?void 0:n.game)==null?void 0:l.end)});return(n,l)=>{const m=ee,p=Le,E=te,f=ue,a=ne;return c(),C(a,{class:"page play"},{default:s(()=>[d(m,null,{default:s(()=>[d(oe)]),_:1}),d(E,null,{default:s(()=>{var _;return[F("div",Ru,[F("h1",null,"\u5267\u672C:"+v((_=A(t))==null?void 0:_.name),1),d(p,{target:".content"},{default:s(()=>[d(Fe)]),_:1}),d(Au),A(u)?$("",!0):(c(),C(xu,{key:0})),A(u)?(c(),C(Su,{key:1})):$("",!0)])]}),_:1}),d(f,null,{default:s(()=>[d(le)]),_:1})]),_:1})}}});var Pu=M(Vu,[["__scopeId","data-v-16a0ca20"]]);const Hu=[{path:"/create/:scenarioName",component:Bu,name:"create",props:!0},{path:"/play",component:Pu,name:"play"},{path:"/",component:zt,name:"HelloWorld"}],w=Te({history:qe(),routes:Hu});const Mu=P({setup(e){return(t,u)=>{const o=We("router-view");return c(),C(Ue,null,{default:s(()=>[d(o)]),_:1})}}}),_e=Oe(Mu);_e.use(x);_e.use(w);w.isReady().then(()=>_e.mount("#app"));
